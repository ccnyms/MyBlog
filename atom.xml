<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Seven</title>
  <icon>https://www.gravatar.com/avatar/d01b0a8daaff9731b3f49780d18fca51</icon>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://cnlmx.top/"/>
  <updated>2020-05-13T07:59:11.814Z</updated>
  <id>https://cnlmx.top/</id>
  
  <author>
    <name>cnlmx</name>
    <email>ccnyms@outlook.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hexo 增加 Google 收录</title>
    <link href="https://cnlmx.top/post/7dd6/"/>
    <id>https://cnlmx.top/post/7dd6/</id>
    <published>2020-05-01T03:43:20.000Z</published>
    <updated>2020-05-13T07:59:11.814Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>博客搭建完成后，一直疏于维护，直到最近开始重新管理，然后发现 Google 还没有收录，所以决定自己提交申请。</p></blockquote><h2 id="根目录配置"><a href="#根目录配置" class="headerlink" title="根目录配置"></a>根目录配置</h2><p>博客根目录下执行命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure><p><code>_config.yml</code>末尾添加如下代码</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自动生成 sitemap</span></span><br><span class="line"><span class="attr">sitemap:</span> </span><br><span class="line"><span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br></pre></td></tr></table></figure><p><code>_config.yml</code>中查找如下代码，把 url 改为自己的博客地址</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://ccnyms.github.io/</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br></pre></td></tr></table></figure><blockquote><p>注意是博客根目录下的<code>_config.yml</code>文件。</p></blockquote><p>编译</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><blockquote><p>查看博客根目录下的 public 文件夹，如果发现<code>sitemap.xml</code>文件即生成成功。</p></blockquote><p>在根目录<code>source</code>文件夹下增加<code>robots.txt</code>文件，<code>Sitemap</code>修改为自己的链接。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># hexo robots.txt</span><br><span class="line">User-agent: *</span><br><span class="line">Allow: &#x2F;</span><br><span class="line">Allow: &#x2F;home&#x2F;</span><br><span class="line">Allow: &#x2F;about&#x2F;</span><br><span class="line">Allow: &#x2F;archives&#x2F;</span><br><span class="line">Allow: &#x2F;categories&#x2F;</span><br><span class="line">Allow: &#x2F;tags&#x2F;</span><br><span class="line">Disallow: &#x2F;js&#x2F;</span><br><span class="line">Disallow: &#x2F;css&#x2F;</span><br><span class="line">Disallow: &#x2F;fonts&#x2F;</span><br><span class="line">Disallow: &#x2F;vendors&#x2F;</span><br><span class="line">Disallow: &#x2F;fancybox&#x2F;</span><br><span class="line"></span><br><span class="line">Sitemap: https:&#x2F;&#x2F;ccnyms.github.io&#x2F;sitemap.xml</span><br></pre></td></tr></table></figure><blockquote><p>robots.txt 可以告诉搜索引擎哪些网页可以收录，哪些不允许收录。</p></blockquote><h2 id="Google-站长工具配置"><a href="#Google-站长工具配置" class="headerlink" title="Google 站长工具配置"></a>Google 站长工具配置</h2><p>进入<a href="https://search.google.com/search-console/about" target="_blank" rel="noopener">Google Search Console</a>，点击立即使用，登录谷歌账号。</p><p>添加资源，选择资源类型：网址前缀，输入博客地址，然后点击继续。</p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/ccnyms/Picture/img/googles01.jpg" style="width: 65%;margin-left:0"><p>验证所有权，选择 HTML 标记验证，点击复制。</p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/ccnyms/Picture/img/googles02.jpg" style="width: 60%;margin-left:0"><h2 id="主题文件配置"><a href="#主题文件配置" class="headerlink" title="主题文件配置"></a>主题文件配置</h2><p><code>_config.yml</code>文件中找到<code>google_site_verification</code>，设置为<code>true</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####    站長驗證    ####</span></span><br><span class="line"><span class="comment"># Google Webmaster tools verification setting</span></span><br><span class="line"><span class="comment"># See: https://www.google.com/webmasters/</span></span><br><span class="line"><span class="attr">google_site_verification:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><blockquote><p>注意是主题目录下的<code>_config.yml</code>文件。</p></blockquote><p>配置<code>themes/Butterfly/layout/includes/head/site_verification.pug</code>文件，用之前复制的代码替换第二行。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.google_site_verification</span><br><span class="line">meta(name&#x3D;&quot;google-site-verification&quot; content&#x3D;theme.google_site_verification)</span><br></pre></td></tr></table></figure><p>生成静态文件并部署</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br></pre></td></tr></table></figure><h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><p>打开博客首页，开启控制台查看<code>&lt;head&gt;</code>标签是否加入了 Google 的验证标记。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"google-site-verification"</span> <span class="attr">content</span>=<span class="string">"G_wF-veta_pkYSiXBTlXtpO4vVoCyOOkoLA_ZKlHyIs"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure><p>确保验证标记出现，回到 Google 的验证页面，点击验证。</p><h2 id="提交"><a href="#提交" class="headerlink" title="提交"></a>提交</h2><p>验证完成后，点击站点地图，添加新的站点地图，即之前生成的<code>sitemap.xml</code>，点击提交。</p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://cdn.jsdelivr.net/gh/ccnyms/Picture/img/googles03.jpg" style="width: 70%;margin-left:0"><blockquote><p>至此，就可以安心等待 Google 进行收录了。</p></blockquote>]]></content>
    
    <summary type="html">
    
      使用 Google Search Console 完成收录
    
    </summary>
    
    
      <category term="Blog" scheme="https://cnlmx.top/categories/Blog/"/>
    
      <category term="Hexo" scheme="https://cnlmx.top/categories/Blog/Hexo/"/>
    
    
      <category term="Hexo" scheme="https://cnlmx.top/tags/Hexo/"/>
    
      <category term="Blog" scheme="https://cnlmx.top/tags/Blog/"/>
    
      <category term="Google" scheme="https://cnlmx.top/tags/Google/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript笔记(六)原型与原型链</title>
    <link href="https://cnlmx.top/post/85e4/"/>
    <id>https://cnlmx.top/post/85e4/</id>
    <published>2019-10-02T02:25:10.000Z</published>
    <updated>2020-05-20T03:42:10.098Z</updated>
    
    <content type="html"><![CDATA[<h2 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>原型（prototype）是 function 对象的一个属性，它定义了构造函数制造出的对象的公有祖先。</p><p>通过该构造函数产生的对象，可以继承该原型的属性和方法。原型也是对象。如：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// xx.prototype -- 原型，在构造函数出生之前，就已经被定义好</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// xx.prototype = &#123;&#125; -- 一个空对象，是 构造函数制造出的所有对象 的祖先</span></span><br><span class="line"></span><br><span class="line">Person.prototype.name = <span class="string">'人'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">// Person &#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(person.name); <span class="comment">// 人</span></span><br><span class="line"><span class="built_in">console</span>.log(person1.name); <span class="comment">// 人</span></span><br></pre></td></tr></table></figure><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p>一个对象，会有自己的属性，也有继承而来的属性：</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.lastName = <span class="string">'刘'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, sex</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">'票'</span>, <span class="number">1</span>, <span class="string">'male'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">// Person &#123; name: '票', age: 1, sex: 'male' &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(person.name); <span class="comment">// 票</span></span><br><span class="line"><span class="built_in">console</span>.log(person.lastName); <span class="comment">// 刘</span></span><br></pre></td></tr></table></figure><p>如果构造函数内有相同属性，按照就近原则，先选择构造函数内的属性，没有的话再去原型里找：</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.name = <span class="string">'人'</span>;</span><br><span class="line">Person.prototype.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'嘿嘿'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'从'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">// Person &#123; name: '从' &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(person.name); <span class="comment">// 从</span></span><br><span class="line">person.say(); <span class="comment">// 嘿嘿</span></span><br></pre></td></tr></table></figure><p>利用原型特点和概念，可以提取共有属性，避免了代码冗余。（如果放在构造函数中，每创建一个对象，就要执行一次。）</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Car.prototype.height = <span class="number">1400</span>;</span><br><span class="line">Car.prototype.lang = <span class="number">4900</span>;</span><br><span class="line">Car.prototype.carName = <span class="string">'BMW'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Car</span>(<span class="params">color, owner</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.owner = owner;</span><br><span class="line">    <span class="keyword">this</span>.color = color;</span><br><span class="line">    <span class="comment">// this.carName = 'BMW';</span></span><br><span class="line">    <span class="comment">// this.height = 1400;</span></span><br><span class="line">    <span class="comment">// this.lang = 4900; </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> car = <span class="keyword">new</span> Car(<span class="string">'red'</span>, <span class="string">'豆'</span>);</span><br><span class="line"><span class="keyword">var</span> car1 = <span class="keyword">new</span> Car(<span class="string">'green'</span>, <span class="string">'团'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(car); <span class="comment">// Car &#123;owner: '豆', color: 'red'&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(car.carName); <span class="comment">// BMW</span></span><br><span class="line"><span class="built_in">console</span>.log(car1); <span class="comment">// Car &#123;owner: '团', color: 'green'&#125;</span></span><br></pre></td></tr></table></figure><p>原型也是对象，所以有一种更简化的写法：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Car.prototype = &#123;</span><br><span class="line">    height : <span class="number">1400</span>,</span><br><span class="line">    lang : <span class="number">4900</span>,</span><br><span class="line">    carName : <span class="string">'BMW'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Car</span>(<span class="params">color, owner</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.owner = owner;</span><br><span class="line">    <span class="keyword">this</span>.color = color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> car = <span class="keyword">new</span> Car(<span class="string">'red'</span>, <span class="string">'豆'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(car); <span class="comment">// Car &#123; owner: '豆', color: 'red' &#125;</span></span><br></pre></td></tr></table></figure><h3 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h3><p>原型不能通过 构造函数生产的对象 进行增加/删除/修改，只能操作它本身进行各种改变。</p><p>可以通过访问构造函数生产的对象属性，访问到原型的属性（当构造函数内没有这个属性时）。</p><p>例如有如下代码，进行增删改查：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype = &#123;</span><br><span class="line">    lastName: <span class="string">'刘'</span>,</span><br><span class="line">    age: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">'团'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">// &#123; name: '团' &#125;</span></span><br></pre></td></tr></table></figure><p>增：通过对象增加属性，只能增加到对象自己身上。</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">person.sex = <span class="string">'female'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype.sex); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(person.sex); <span class="comment">// female</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接操作原型：</span></span><br><span class="line">Person.prototype.sex = <span class="string">'female'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype.sex); <span class="comment">// female</span></span><br></pre></td></tr></table></figure><p>删：通过对象删除属性，也只能删除对象自己的属性，即使对象中没有这个属性。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> person.age;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype); <span class="comment">// &#123; lastName: '刘', age: 1 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">// &#123; name: '团' &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接操作原型：</span></span><br><span class="line"><span class="keyword">delete</span> Person.prototype.age;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype); <span class="comment">// &#123; lastName: '刘' &#125;</span></span><br></pre></td></tr></table></figure><p>改：通过对象修改属性，只能修改对象自己的属性，如果对象没有这个属性，那么直接新增到该对象中。</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">person.lastName = <span class="string">'陈'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">// &#123; name: '团', lastName: '陈' &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype); <span class="comment">// &#123; lastName: '刘', age: 1 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接操作原型：</span></span><br><span class="line">Person.prototype.lastName = <span class="string">'陈'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Person.prototype); <span class="comment">// &#123; lastName: '陈', age: 1 &#125;</span></span><br></pre></td></tr></table></figure><p>查：当构造函数内没有这个属性时，可以通过对象访问到原型的属性。</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(person.lastName); <span class="comment">// 刘</span></span><br></pre></td></tr></table></figure><blockquote><p>如果原型的属性是引用值，然后对象调用这个引用值进行修改，那么可以把它自己的属性值改掉。这相当于引用值自身的修改，原始值不可能出现这种情况。</p></blockquote>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Piao.prototype = &#123;</span><br><span class="line">    name: <span class="string">'团'</span>,</span><br><span class="line">    fortune: &#123; <span class="comment">// 这个属性是引用值</span></span><br><span class="line">        card1: <span class="string">'visa'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    num: <span class="number">100</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Piao</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> piao = <span class="keyword">new</span> Piao();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(piao.fortune); <span class="comment">// &#123; card1: 'visa' &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调动引用值 fortune 自己的修改，无论谁调用它，它操作的都是自身</span></span><br><span class="line"></span><br><span class="line">piao.fortune.card2 = <span class="string">'master'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(piao); <span class="comment">// &#123; age: 1 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Piao.prototype.fortune);  <span class="comment">// &#123; card1: 'visa', card2: 'master' &#125;</span></span><br><span class="line"></span><br><span class="line">piao.num ++;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里的 ++，意为 piao.num = piao.num + 1，右边的 piao.num 从原型中拿，加完后赋值给左边，相当于给对象 piao 里新增了属性名 num 和属性值 101</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(piao.__proto__); <span class="comment">// &#123;name: '团', fortune: &#123; card1: 'visa', card2: 'master' &#125;, num: 100&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(piao); <span class="comment">// &#123; age: 1, num: 101 &#125;</span></span><br></pre></td></tr></table></figure><h3 id="proto"><a href="#proto" class="headerlink" title="__proto__"></a><code>__proto__</code></h3><p>对象可以利用隐式属性<code>__proto__</code>查看原型。</p><p>在使用<code>new</code>构造函数生产对象时，会发生隐式三段式。<code>__proto__</code>就在 this 里面，它存的是这个构造函数的原型（所在的地址引用）。</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype = &#123;</span><br><span class="line">    name: <span class="string">'abc'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// var this = &#123;</span></span><br><span class="line">    <span class="comment">//   __proto__ : Person.prototype</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person.__proto__); <span class="comment">// &#123; name: 'abc' &#125;</span></span><br></pre></td></tr></table></figure><p>如果修改<code>__proto__</code>的指向，对象的构造函数链接的原型也会发生改变。</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype = &#123;</span><br><span class="line">    name: <span class="string">'abc'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// var this = &#123;</span></span><br><span class="line">    <span class="comment">//   __proto__ : Person.prototype</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义一个对象：</span></span><br><span class="line"><span class="keyword">var</span> weather = &#123;</span><br><span class="line">    name : <span class="string">'sunny'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改 __proto__ 的指向：</span></span><br><span class="line">person.__proto__ = weather;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自此，这个构造函数的原型就被改掉了，也即它生产的所有对象的原型被改掉了</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person.__proto__); <span class="comment">// &#123; name: 'sunny' &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(person.name); <span class="comment">// sunny</span></span><br></pre></td></tr></table></figure><h3 id="引用值赋值"><a href="#引用值赋值" class="headerlink" title="引用值赋值"></a>引用值赋值</h3><p>因为原型是对象，而构造函数也是函数，所以需要考察引用值赋值和函数声明提升的情况。</p><p>原理：引用值赋值之后，如果是在原值上增删，会直接修改。如果新的赋值，就会直接存放到新的地方，原值不动。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原值（原来的引用）：</span></span><br><span class="line">Person.prototype = &#123;<span class="attr">name</span> : <span class="string">'a'</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里的 __proto__ 和 Person.prototype 都指向原值（原来的引用）：</span></span><br><span class="line">__proto__ : Person.prototype;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Person.prototype 换成了新值（新的引用）：</span></span><br><span class="line">Person.prototype = &#123;<span class="attr">name</span> : <span class="string">'b'</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 但是 __proto__ 的指向依然没变：</span></span><br><span class="line"><span class="built_in">console</span>.log(person.__proto__); <span class="comment">// &#123; name: 'a' &#125;</span></span><br></pre></td></tr></table></figure><p>在原有的原型上修改属性值，原值增删，修改的是同一个房间里的引用值，<code>new</code>和<code>Person.prototype.name = &#39;cherry&#39;;</code>谁在前谁在后是一样的结果。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype = &#123;</span><br><span class="line">    name : <span class="string">'sunny'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// var this = &#123;</span></span><br><span class="line">    <span class="comment">//__proto__ : Person.perototype</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line">Person.prototype.name = <span class="string">'cherry'</span>; </span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person.name); <span class="comment">// cherry</span></span><br></pre></td></tr></table></figure>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype = &#123;</span><br><span class="line">    name : <span class="string">'sunny'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//var this = &#123;</span></span><br><span class="line">    <span class="comment">// __proto__ : Person.prototype</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.name = <span class="string">'cherry'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person.name);  <span class="comment">// cherry</span></span><br></pre></td></tr></table></figure><p>原型赋新值：</p><ul><li>先出现<code>new</code>，那么<code>__proto__</code>里存的就是原来的原型地址引用。后面再给原型赋新值，<code>__proto__</code>里的地址引用也不会变。</li><li>如果是先赋新值，后出现<code>new</code>，还会涉及到函数声明提升，结果也会不同。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype = &#123;</span><br><span class="line">    name : <span class="string">'sunny'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// var this = &#123;</span></span><br><span class="line">    <span class="comment">//__proto__ : Person.prototype</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 出现 new，执行构造函数，开始出现 this</span></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这里的 Person.prototype 换了新的地址链接</span></span><br><span class="line"><span class="comment">// 但是 this 里的 Person.prototype 还是指向的原有地址链接</span></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">    name : <span class="string">'cherry'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person.name); <span class="comment">// sunny</span></span><br></pre></td></tr></table></figure><h3 id="函数声明提升"><a href="#函数声明提升" class="headerlink" title="函数声明提升"></a>函数声明提升</h3><p>原值增删、赋新值但<code>new</code>在前的这几种情况，函数声明提升不会影响结果。</p><p>但是先赋新值后<code>new</code>的情况需注意：</p><ul><li>函数声明提升，开始执行，第二个<code>Person.prototype</code>直接把第一个<code>Person.prototype</code>覆盖。</li><li>然后<code>new</code>出现，构造函数执行，发生隐式三段式（this）</li><li>此时<code>Person.prototype</code>的地址引用已经改变，相应的<code>this</code>也会发生改变：</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype = &#123;</span><br><span class="line">    name : <span class="string">'sunny'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">    name : <span class="string">'cherry'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// __proto__ 还没有出现，第二个 Person.prototype 已经把第一个覆盖了</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person.name); <span class="comment">// cherry</span></span><br></pre></td></tr></table></figure><h3 id="构造器-constructor"><a href="#构造器-constructor" class="headerlink" title="构造器 constructor"></a>构造器 constructor</h3><p>对象可以利用原型内的隐式属性<code>constructor</code>查看对象的构造函数。</p><p>对象通过访问构造器，可以找到生产这个对象的构造函数。</p><p><code>constructor</code>属性在原型里，所以也可以通过原型直接访问。</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Card</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'Apple Card'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> card = <span class="keyword">new</span> Card();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过对象 card 访问</span></span><br><span class="line"><span class="built_in">console</span>.log(card.constructor); <span class="comment">// [Function: Card]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过原型 Card.prototype 访问</span></span><br><span class="line"><span class="built_in">console</span>.log(Card.prototype.constructor); <span class="comment">// [Function: Card]</span></span><br></pre></td></tr></table></figure><p>如果修改构造器，可以让对象的构造函数发生改变。</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">Car.prototype = &#123;</span><br><span class="line">  <span class="keyword">constructor</span>: Person</span><br><span class="line">  // 原来的 <span class="keyword">constructor</span>: Car</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Car() &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> car = <span class="keyword">new</span> Car();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(car.constructor); <span class="comment">// [Function: Person]</span></span><br></pre></td></tr></table></figure><blockquote><p><code>constructor</code>在原型里指向构造函数，<code>__proto__</code>在构造函数里指向原型。</p></blockquote><p>比较：</p><table><thead><tr><th align="center">比较</th><th align="center"><code>constructor</code></th><th align="center"><code>__proto__</code></th></tr></thead><tbody><tr><td align="center">所在位置</td><td align="center">prototype （原型）里</td><td align="center">构造函数中隐式的 this 里</td></tr><tr><td align="center">目的</td><td align="center">查找构造函数</td><td align="center">查找原型</td></tr><tr><td align="center">访问</td><td align="center">通过对象/原型访问</td><td align="center">通过对象访问</td></tr><tr><td align="center">修改指向</td><td align="center">可以</td><td align="center">可以</td></tr></tbody></table>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Card.prototype = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Card</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'Apple Card'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> card = <span class="keyword">new</span> Card();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(card.constructor == Card.prototype.constructor); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(card.__proto__ == Card.prototype); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h2><h3 id="构成和修改"><a href="#构成和修改" class="headerlink" title="构成和修改"></a>构成和修改</h3><p>如何构成原型链：连接点<code>__proto__</code></p><ul><li><code>Grand.prototype</code>的原型：<code>Object.prototype</code></li><li><code>Grand</code>的原型： <code>Grand.prototype</code></li><li><code>Father</code>的原型：<code>Grand</code>生产的对象<code>grand</code></li><li><code>Son</code>的原型：<code>Father</code>生产的对象<code>father</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Grand.prototype.__proto__ = Object.prototype;</span></span><br><span class="line"></span><br><span class="line">Grand.prototype = &#123; <span class="comment">// grand.__proto__ = Grand.prototype</span></span><br><span class="line">    lastName : <span class="string">'Deng'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Grand</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="comment">//this = &#123;__proto__: Grand.prototype&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> grand = <span class="keyword">new</span> Grand(); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Father.prototype = grand; <span class="comment">// father.__proto__ = 对象 grand</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="comment">// this = &#123;__proto__: Father.prototype&#125; </span></span><br><span class="line">    <span class="keyword">this</span>.name = <span class="string">'xuming'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> father = <span class="keyword">new</span> Father(); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Son.prototype = father; <span class="comment">// son.__proto__ = 对象 father</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// this = &#123;__proto__: Son.prototype&#125;</span></span><br><span class="line">    <span class="keyword">this</span>.hobbit = <span class="string">'smoke'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(son.hobbit); <span class="comment">// smoke</span></span><br><span class="line"><span class="built_in">console</span>.log(son.name); <span class="comment">// xuming</span></span><br><span class="line"><span class="built_in">console</span>.log(son.lastName); <span class="comment">// Deng</span></span><br></pre></td></tr></table></figure><ul><li>所有对象的最终原型：<code>Object.prototype</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype); </span><br><span class="line"><span class="comment">// &#123;constructor: ƒ, __defineGetter__: ƒ, __defineSetter__: ƒ, hasOwnProperty: ƒ, __lookupGetter__: ƒ, …&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.__proto__); <span class="comment">// null</span></span><br></pre></td></tr></table></figure><p>原型链上属性的增删改查：与原型的方法基本一致。</p><p>关于 <code>this</code>指向：方法调用中如果有<code>this</code>，谁调用，<code>this</code>就指向谁。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype = &#123;</span><br><span class="line">  name : <span class="string">'a'</span>,</span><br><span class="line">  sayName : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name); </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'b'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象 person 调用，那么 this 就指向 person</span></span><br><span class="line">person.sayName(); <span class="comment">// b</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 原型 Person.prototype 调用，那么 this 就指向 Person.prototype</span></span><br><span class="line">Person.prototype.sayName(); <span class="comment">// a</span></span><br></pre></td></tr></table></figure><h3 id="原型链终端"><a href="#原型链终端" class="headerlink" title="原型链终端"></a>原型链终端</h3><p>一个对象的原型只能是<code>Object</code>或者<code>null</code>。</p><p>绝大多数对象最终都会继承自<code>Object.prototype</code>。无论是对象字面量，还是构造函数，或者<code>Object.create(原型)</code>方法，它们创建的对象都不例外。</p><p>只有一个特例，那就是<code>Object.create(null)</code>。当<code>Object.create(null)</code>创建对象时，没有原型。就算强行加上<code>__proto__</code>属性，系统也是不认的，对象无法继承它里面的属性。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj.__proto__); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(obj)); <span class="comment">// object</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 自己加上 __proto__：</span></span><br><span class="line"></span><br><span class="line">obj.__proto__ = &#123;</span><br><span class="line">  name : <span class="string">'sunny'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj.name); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h3 id="toString-与重写"><a href="#toString-与重写" class="headerlink" title="toString() 与重写"></a>toString() 与重写</h3><p><code>Object.prototype</code>里有一个<code>toString()</code>方法，任何继承自它的对象，都可以使用这个方法：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj.__proto__);</span><br><span class="line"></span><br><span class="line"><span class="comment">// constructor: ƒ Object()</span></span><br><span class="line"><span class="comment">// hasOwnProperty: ƒ hasOwnProperty()</span></span><br><span class="line"><span class="comment">// toString: ƒ toString()</span></span><br><span class="line"><span class="comment">// ......</span></span><br></pre></td></tr></table></figure><p>原型上有这个方法，但是自身又写了一个和它同一个名字不同功能的方法，就叫做方法的重写。</p><p>原型上的<code>toString()</code>方法：</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person.toString()); <span class="comment">// [object Object]</span></span><br></pre></td></tr></table></figure><p>重写：</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype = &#123;</span><br><span class="line">    toString : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'嘿嘿'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person.toString()); <span class="comment">// 嘿嘿</span></span><br></pre></td></tr></table></figure><p><code>Object.prototype.toString()</code>是最开始的方法，下面的方法经过了系统自己的重写，重写后具备了想要的功能：</p><ul><li>Number.prototype.toString()</li><li>Array.prototype.toString()</li><li>Boolean.prototype.toString()</li><li>String.prototype.toString()</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// new Number(123).toString();</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num.toString()); <span class="comment">// '123'</span></span><br></pre></td></tr></table></figure><blockquote><p>document.write 在运行时，其实隐式地调用了 toString() 方法，最后输出的是执行 toString() 后的结果。</p></blockquote><p>没有原型的对象 obj，输出会直接报错。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.write(obj); <span class="comment">// 报错，Uncaught TypeError: Cannot convert object to primitive value</span></span><br></pre></td></tr></table></figure><p>有原型的对象 obj，调用原型终端链里的<code>toString()</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Obj</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> Obj();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Obj.prototype.toString()); <span class="comment">// [object Object]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.write(obj); <span class="comment">// [object Object]</span></span><br></pre></td></tr></table></figure><p>没有原型的对象 obj 在人为增加<code>toString()</code>方法后，就可以正常输出了。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">obj.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'票票是个小狗鸡'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//要求打印 obj，页面显示的是 toString 调用后的结果</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.write(obj); <span class="comment">// 票票是个小狗鸡</span></span><br></pre></td></tr></table></figure><h2 id="call-apply"><a href="#call-apply" class="headerlink" title="call() / apply()"></a>call() / apply()</h2><p><code>call</code>没有传参数之前：<code>test.call()</code>等价于<code>test()</code>，都是函数执行。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'啦啦啦'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test.call(); <span class="comment">// 等价于 test();</span></span><br></pre></td></tr></table></figure><p>作用：改变 this 指向。</p><p>唯一区别：传参列表不同（后面传的参数形式不同）。</p><p>第一位参数是改变 this 指向的对象位，从第二位参数开始：</p><ul><li><code>call()</code>需要把实参按照形参的个数传进去。</li><li><code>apply()</code>需要传一个<code>arguments</code>数组。</li></ul><h3 id="call"><a href="#call" class="headerlink" title="call()"></a>call()</h3><p>格式：<code>xx.call(object,argument1,argument2)</code>。</p><p>要求：第一位参数是改变 this 指向的对象位。后续的参数可以依次传入，即把实参按照形参的个数传进去。</p><p>例如：</p><ul><li><code>Person.call(obj, &#39;豆&#39;, 100);</code></li><li>第一位参数<code>obj</code>，意为让 Person 里所有的 this 全部指向对象 obj，改变了 this 的指向。</li><li>第二位及之后的参数，按照实际参数的顺序依次传入。</li><li>相当于 this 变成了 obj ，借用 Person 这个构造函数，实现了 obj 的功能。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// this == obj</span></span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">'团'</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line">Person.call(obj, <span class="string">'豆'</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; name: '豆', age: 100 &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">// Person &#123; name: '团', age: 100 &#125;</span></span><br></pre></td></tr></table></figure><h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><p>当你的需求可以完全覆盖别人的需求时，可以直接别人的来用：</p><ul><li>第二个功能完全覆盖第一个，直接将第一个的功能拿来用。</li><li>在第二个构造函数中，调用执行第一个构造函数，通过<code>call()</code>方法改变它的<code>this</code>指向。</li><li><code>call()</code>的第一位参数填写<code>this</code>，意为让第一个构造函数的<code>this</code>全部指向当前构造函数的<code>this</code>，后面的参数填写覆盖的功能。</li><li>这样就实现了封装。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, sex, tel, grade</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// var this = &#123;&#125;</span></span><br><span class="line">    Person.call(<span class="keyword">this</span>, name, age, sex); </span><br><span class="line">    <span class="comment">// 通过 Person.call(this,...)，将函数 Person 里的 this 全部改变指向到函数 Student 中的 this</span></span><br><span class="line">    <span class="keyword">this</span>.tel = tel;</span><br><span class="line">    <span class="keyword">this</span>.grade = grade;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> student = <span class="keyword">new</span> Student(<span class="string">'sunny'</span>, <span class="number">123</span>, <span class="string">'male'</span>, <span class="number">12345433</span>, <span class="number">2017</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(student); <span class="comment">// Student &#123;name: "sunny", age: 123, sex: "male", tel: 12345433, grade: 2017&#125;</span></span><br></pre></td></tr></table></figure><p>如果要实现一个大的功能，不同的部件由不同的功能实现；</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 车轮：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Wheel</span>(<span class="params">wheelSize, style</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.wheelSize = wheelSize;</span><br><span class="line">    <span class="keyword">this</span>.style = style;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 座椅：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sit</span>(<span class="params">comfortable, sitColor</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.comfortable = comfortable;</span><br><span class="line">    <span class="keyword">this</span>.sitColor = sitColor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 型号：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Model</span>(<span class="params">height, width, length</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.height = height;</span><br><span class="line">    <span class="keyword">this</span>.width = width;</span><br><span class="line">    <span class="keyword">this</span>.length = length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 车：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Car</span>(<span class="params">wheelSize, style, comfortable, sitColor, height, width, length</span>) </span>&#123;</span><br><span class="line">    Wheel.call(<span class="keyword">this</span>, wheelSize, style);</span><br><span class="line">    Sit.call(<span class="keyword">this</span>, comfortable, sitColor);</span><br><span class="line">    Model.call(<span class="keyword">this</span>, height, width, length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> car = <span class="keyword">new</span> Car(<span class="number">100</span>, <span class="string">'花里胡哨'</span>, <span class="string">'真皮'</span>, <span class="string">'red'</span>, <span class="number">1800</span>, <span class="number">1900</span>, <span class="number">4900</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(car);</span><br><span class="line"><span class="comment">// Car &#123;</span></span><br><span class="line"><span class="comment">//     wheelSize: 100,</span></span><br><span class="line"><span class="comment">//     style: '花里胡哨',</span></span><br><span class="line"><span class="comment">//     comfortable: '真皮',</span></span><br><span class="line"><span class="comment">//     sitColor: 'red',</span></span><br><span class="line"><span class="comment">//     height: 1800,</span></span><br><span class="line"><span class="comment">//     width: 1900,</span></span><br><span class="line"><span class="comment">//     length: 4900 </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><h3 id="apply"><a href="#apply" class="headerlink" title="apply()"></a>apply()</h3><p>格式：<code>xx.apply(object, arguments)</code>。</p><p>要求：第一位参数是改变 this 指向的对象位。后面再只能传一个参数，且必须为数组，即需要传一个<code>arguments</code>数组。</p><p>例如：</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, sex, tel, grade</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// var this = &#123;...&#125;</span></span><br><span class="line">    Person.apply(<span class="keyword">this</span>, [name, age, sex]);   <span class="comment">// 这里的改变</span></span><br><span class="line">    <span class="keyword">this</span>.tel = tel;</span><br><span class="line">    <span class="keyword">this</span>.grade = grade;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> student = <span class="keyword">new</span> Student(<span class="string">'sunny'</span>, <span class="number">123</span>, <span class="string">'male'</span>, <span class="number">12345433</span>, <span class="number">2017</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(student); <span class="comment">// Student &#123;name: "sunny", age: 123, sex: "male", tel: 12345433, grade: 2017&#125;</span></span><br></pre></td></tr></table></figure><h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><h3 id="原型链（传统形式）"><a href="#原型链（传统形式）" class="headerlink" title="原型链（传统形式）"></a>原型链（传统形式）</h3><p>例：可查看原型链例。</p><p>缺点：过多的继承了没用的属性。（从头继承到尾）</p><h3 id="借用（别人的）构造函数"><a href="#借用（别人的）构造函数" class="headerlink" title="借用（别人的）构造函数"></a>借用（别人的）构造函数</h3><p>例：可查看 call() / apply() 例。</p><p>缺点：</p><ul><li>不能继承借用的构造函数的原型，原型用的还是自己的；</li><li>每构造一个对象都要执行两个方法：自己的构造函数，还有别人的函数调用。</li></ul><p>所以，从继承角度来看，这个不算是严格意义上的继承方法。</p><h3 id="共享原型"><a href="#共享原型" class="headerlink" title="共享原型"></a>共享原型</h3><p>如果想要构造函数 B 拥有构造函数 A 的原型，也就是 B 继承 A 的原型，那么直接让 <code>B.prototype = A.prototype</code> 即可。</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Father.prototype.lastName = <span class="string">'Deng'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引用值直接赋值，相当于把 Father 的原型地址链接给 Son </span></span><br><span class="line"><span class="comment">// 现在这两个构造函数继承自同一个原型</span></span><br><span class="line"></span><br><span class="line">Son.prototype = Father.prototype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son();</span><br><span class="line"><span class="keyword">var</span> father = <span class="keyword">new</span> Son();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(son.lastName); <span class="comment">// Deng</span></span><br><span class="line"><span class="built_in">console</span>.log(father.lastName); <span class="comment">// Deng</span></span><br></pre></td></tr></table></figure><p>在实际开发中，我们经常会抽象出功能，封装成函数。函数代表功能的复用，这样更有利于后续的开发和维护。例如抽象出“继承”这个功能：</p><ul><li>继承辅助函数有：<code>extend()</code>、<code>inherit()</code></li><li>已知多个对象可以共用一个构造函数。</li><li>通过继承可以让多个构造函数共用一个原型。</li><li>所以，如果想要构造函数生产的所有对象都改变原型，那么直接让构造函数继承别人的原型就可以了。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Father.prototype.lastName = <span class="string">'Deng'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用辅助函数</span></span><br><span class="line"><span class="comment">// Target 要继承别人原型的构造函数</span></span><br><span class="line"><span class="comment">// Origin 被继承原型的构造函数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">Target, Origin</span>) </span>&#123;</span><br><span class="line">    Target.prototype = Origin.prototype</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inherit(Son, Father);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(son.lastName); <span class="comment">// Deng</span></span><br></pre></td></tr></table></figure><p>缺点：不能随便改动自己的原型。两个构造函数的原型是同一个地址引用，考虑到引用值赋值的原理，无论是哪一个，只要一个进行修改，那么另一个也会跟着改变。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Father.prototype.lastName = <span class="string">'Deng'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">Target, Origin</span>) </span>&#123;</span><br><span class="line">    Target.prototype = Origin.prototype</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inherit(Son, Father);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Son 修改原型属性后，Father 的原型也会跟着改变。</span></span><br><span class="line"></span><br><span class="line">Son.prototype.sex = <span class="string">'male'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son();</span><br><span class="line"><span class="keyword">var</span> father = <span class="keyword">new</span> Father();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(son.sex); <span class="comment">// male</span></span><br><span class="line"><span class="built_in">console</span>.log(father.sex); <span class="comment">// male</span></span><br></pre></td></tr></table></figure><h3 id="圣杯模式"><a href="#圣杯模式" class="headerlink" title="圣杯模式"></a>圣杯模式</h3><p>为了弥补共享原型的缺点而生出的方法，既可以共享原型，又可以在改动时只改动自己的原型，而不涉及另一个。</p><p>综合运用共享原型和原型链：</p><ul><li>增加一个过渡的构造函数 F，让 F 的原型等于要被继承的构造函数 A 的原型：<code>F.prototype = A.prototype</code>。</li><li>然后让目标构造函数 B 等于过渡构造函数生产的对象：<code>B.prototype = new F()</code>。</li><li>这样 B 就通过原型链的方式继承到了 F 的原型。</li><li>优点：当我想给 B 的原型上加属性的时候，不会影响到 A 的原型。</li></ul><p>例：</p><ul><li>注意，语句 1 和 2 的顺序不能调转。</li><li>构造函数一 new 就会出现 this，里面有<code>__proto__: F.prototype</code></li><li>如果 new 之后再给<code>F.prototype</code>赋新值：<code>F.prototype = Origin.prototype;</code>。基于引用值赋值的原理，此时<code>__proto__</code>里的地址引用还是之前的，不会改变。</li><li>Son 最终继承的会是 F 自己的原型，这样就达不到我们想要的效果了。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Father.prototype.lastName = <span class="string">'Deng'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 过渡构造函数 F ，让它的原型等于 Father 的原型</span></span><br><span class="line"><span class="comment">// 让 Son 等于构造函数 F 生产的对象</span></span><br><span class="line"><span class="comment">// 通过原型链，Son 继承到了 F 的原型</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">Target, Origin</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    F.prototype = Origin.prototype;             <span class="comment">// 1</span></span><br><span class="line">    Target.prototype = <span class="keyword">new</span> F();                 <span class="comment">// 2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inherit(Son, Father);</span><br><span class="line"></span><br><span class="line">Son.prototype.sex = <span class="string">'male'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> son = <span class="keyword">new</span> Son();</span><br><span class="line"><span class="keyword">var</span> father = <span class="keyword">new</span> Father();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(son.lastName); <span class="comment">// Deng</span></span><br><span class="line"><span class="built_in">console</span>.log(father.lastName); <span class="comment">// Deng</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(son.sex); <span class="comment">// male</span></span><br><span class="line"><span class="built_in">console</span>.log(father.sex); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(Father.prototype); <span class="comment">// Father &#123; lastName: 'Deng' &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 找错构造函数：</span></span><br><span class="line"><span class="built_in">console</span>.log(son.constructor); <span class="comment">// Father() &#123;&#125;</span></span><br></pre></td></tr></table></figure><p>但是也出现了一个问题：对象 son 此时访问构造器 constructor，会指向构造函数 Father，找错了构造函数，产生了混乱。</p><ul><li>正常情况下，构造函数<code>son.constructor</code> 在它的原型里 -&gt; 原型<code>son.__proto__ = new F()</code></li><li><code>new F()</code>是构造函数 F 生成的对象，它可以访问 constructor 属性，但它自己没有，这个属性是原型的。所以接着找。</li><li><code>new F().__proto__ = F.prototype = Father.prototype</code></li><li><code>Father.prototype</code>里有<code>constructor</code>属性，但是它指向的是构造函数 Father</li></ul><blockquote><p>寻找路线：<code>son.constructor -&gt; Son.prototype = new F() -&gt; F.prototype = Father.prototype</code></p></blockquote><p>解决办法：</p><ul><li>在封装时手动归位。封装函数中直接指定它的构造器：<code>Target.prototype.constructor = Target;</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">Target, Origin</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    F.prototype = Origin.prototype;</span><br><span class="line">    Target.prototype = <span class="keyword">new</span> F();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 增加这条，可以让 son 访问构造器时指向它自己的构造函数 Son</span></span><br><span class="line">    Target.prototype.constructor = Target;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inherit(Son, Father);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ......</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(son.constructor); <span class="comment">// Son()&#123;&#125;</span></span><br></pre></td></tr></table></figure><p>如果我们希望构造出来的对象，可以找到它的超类（超级父级），也就是最终继承自谁，在有需要的时候可以直接找到。</p><ul><li>在封装时增加 <code>Target.prototype.uber = Origin.prototype;</code>。</li><li>如果需要知道 son 最终继承自谁，调用该方法即可。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">Target, Origin</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">    F.prototype = Origin.prototype;</span><br><span class="line">    Target.prototype = <span class="keyword">new</span> F();</span><br><span class="line">    Target.prototype.constructor = Target;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 增加这条，可以在需要知道的时候快速找到 Son 的原型继承自谁</span></span><br><span class="line">    Target.prototype.uber = Origin.prototype;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inherit(Son, Father);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ......</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Son.prototype.uber); <span class="comment">// Father &#123; lastName: 'Deng' &#125;</span></span><br></pre></td></tr></table></figure><p>推荐写法：运用闭包和立即执行函数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> inherit = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> F = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">Target, Origin</span>) </span>&#123;</span><br><span class="line">        F.prototype = Origin.prototype;</span><br><span class="line">        Target.prototype = <span class="keyword">new</span> F();</span><br><span class="line">        Target.prototype.constructor = Target;</span><br><span class="line">        Target.prototype.uber = Origin.prototype;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure><blockquote><p><code>return 函数</code>就相当于是 return 这个函数的引用。<br>函数 F 成为了函数 inherit 的私有化变量。<br>事实上，函数 F 只是作为一个过渡作用存在，所以成为私有化变量，不管是从语义上还是写法上来看都更好。</p></blockquote><p>return 之后实际运行就变成了：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> inherit = <span class="function"><span class="keyword">function</span> (<span class="params">Target, Origin</span>) </span>&#123;</span><br><span class="line">    F.prototype = Origin.prototype;</span><br><span class="line">    Target.prototype = <span class="keyword">new</span> F();</span><br><span class="line">    Target.prototype.constructor = Target;</span><br><span class="line">    Target.prototype.uber = Origin.prototype;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      原型｜原型链｜继承
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://cnlmx.top/categories/JavaScript/"/>
    
      <category term="学习笔记" scheme="https://cnlmx.top/categories/JavaScript/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="JavaScript" scheme="https://cnlmx.top/tags/JavaScript/"/>
    
      <category term="前端" scheme="https://cnlmx.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript笔记(五)对象</title>
    <link href="https://cnlmx.top/post/7aae/"/>
    <id>https://cnlmx.top/post/7aae/</id>
    <published>2019-09-20T01:29:00.000Z</published>
    <updated>2020-05-20T03:41:56.261Z</updated>
    
    <content type="html"><![CDATA[<h2 id="创建和操作"><a href="#创建和操作" class="headerlink" title="创建和操作"></a>创建和操作</h2><p>例如一个对象：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mrPiao = &#123;</span><br><span class="line">    name : <span class="string">'票'</span>,</span><br><span class="line">    age : <span class="number">1</span>,</span><br><span class="line">    sex : <span class="string">'male'</span>,</span><br><span class="line">    health : <span class="number">100</span>,</span><br><span class="line">    eat : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'I am eating'</span>);</span><br><span class="line">        <span class="keyword">this</span>.health --;</span><br><span class="line">    &#125;,</span><br><span class="line">    drink : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'I am drink'</span>);</span><br><span class="line">        <span class="keyword">this</span>.health ++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>增删改查：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mrPiao.toy = <span class="string">'逗猫棒'</span>; <span class="comment">// 增</span></span><br><span class="line"><span class="keyword">delete</span> mrPiao.sex;  <span class="comment">// 删</span></span><br><span class="line">mrPiao.age = <span class="number">2</span>; <span class="comment">// 改</span></span><br><span class="line"><span class="built_in">console</span>.log(mrPiao.health); <span class="comment">// 查</span></span><br></pre></td></tr></table></figure><p>访问一个对象没有的属性时，会返回<code>undefined</code>。</p><p>创建对象目前有三种方法：</p><ol><li>对象字面量，又叫对象直接量（Plain Object），直接写即可。如 <code>var object = {}</code></li><li>构造函数。构造函数又分为系统自带和自定义。</li><li>Object.create(原型) 方法。</li></ol><p>通过<code>Object.create(原型)</code>方法创建对象：</p><ol><li>自己指定原型：<code>var tuan = {...}</code></li><li>创建一个对象并将原型写入：<code>var piao = Object.creat(tuan)</code></li><li>此时<code>piao</code>就为一个对象，它的原型是<code>tuan</code></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tuan = &#123;</span><br><span class="line">    name : <span class="string">'团'</span>,</span><br><span class="line">    age : <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> piao = <span class="built_in">Object</span>.create(tuan);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(piao)); <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(piao.__proto__); <span class="comment">// &#123; name: '团', age: 1 &#125;</span></span><br></pre></td></tr></table></figure><h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><h3 id="系统自带的构造函数"><a href="#系统自带的构造函数" class="headerlink" title="系统自带的构造函数"></a>系统自带的构造函数</h3><p><code>Object(); Array(); Number(); Boolean(); Date();</code></p><p>构造函数前面加一个<code>new</code>，就可以返回一个对象，然后通过变量接收即可。如：<code>var obj = new Object();</code></p><p>构造函数创建的对象，和对象字面量创建的对象没有区别。构造函数就像一个工厂，每执行一次，就创建一个对象。每次创建的对象，一模一样但相互独立。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'abcd'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bol = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出对象，可增加属性和方法</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// Number &#123;123&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(str); <span class="comment">// String &#123;"abcd"&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(bol); <span class="comment">// Boolean &#123;true&#125;</span></span><br><span class="line"></span><br><span class="line">num.name = <span class="string">'豆'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// Number &#123;123, name: "豆"&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num * <span class="number">2</span>); <span class="comment">// 246</span></span><br></pre></td></tr></table></figure><h3 id="自定义构造函数"><a href="#自定义构造函数" class="headerlink" title="自定义构造函数"></a>自定义构造函数</h3><p>由于构造函数和函数在结构上没有任何区别，所以为了区分，构造函数命名需要严格遵守大驼峰式命名规则：从第一个单词开始首字母大写。</p><p>依然使用<code>new</code>操作符生成对象。</p><p>具体步骤：</p><ol><li>创建一个构造函数，里面写共有属性。</li><li>通过<code>new</code>返回一个对象，用变量接收。执行一次返回一个对象。</li><li>可以单独为这个对象增加属性，不影响返回的其他对象。</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(); </span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> Person();</span><br><span class="line"></span><br><span class="line">person.name = <span class="string">'团'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person);<span class="comment">// Person &#123; age: 3, name: '团' &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person1);<span class="comment">// Person &#123; age: 3&#125;</span></span><br></pre></td></tr></table></figure><h3 id="内部原理"><a href="#内部原理" class="headerlink" title="内部原理"></a>内部原理</h3><p>没有<code>new</code>操作符的话，就按照函数正常执行。</p><p>有<code>new</code>操作符时，系统会执行如下三步：</p><ol><li>在函数体最前面隐式的加上一个对象：<code>this = Object.create(构造函数.prototype) = {};</code></li><li>执行 <code>this.xxx = xxx;</code></li><li>隐式的返回 this：<code>return this;</code></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// var this = Object.create(Student.prototype) = &#123;&#125;;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    <span class="keyword">this</span>.grade = <span class="number">2019</span>; </span><br><span class="line"></span><br><span class="line">    <span class="comment">// return this;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> student = <span class="keyword">new</span> Student(<span class="string">'团'</span>, <span class="number">3</span>, <span class="string">'female'</span>); </span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(student); <span class="comment">// Student &#123;name: '团', age: 3, sex: 'female', grade: 2019&#125;</span></span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>在构造函数内可以增加属性，还可以设置参数：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    <span class="keyword">this</span>.grade = <span class="number">2019</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> student = <span class="keyword">new</span> Student(<span class="string">'团'</span>, <span class="number">3</span>, <span class="string">'female'</span>); </span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(student); <span class="comment">// Student &#123;name: '团', age: 3, sex: 'female', grade: 2019&#125;</span></span><br></pre></td></tr></table></figure><p>如果对象的属性不存在，直接访问的话，会返回 “undefined”。</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> obj = <span class="keyword">new</span> Person(); </span><br><span class="line">  </span><br><span class="line">  <span class="built_in">console</span>.log(obj); <span class="comment">// Person &#123; age: 3 &#125;</span></span><br><span class="line">  <span class="built_in">console</span>.log(obj.name); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>在构造函数过程中，如果强制显式的返回一个引用值，可以将隐式返回的<code>this</code>覆盖。</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, height</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.height = height;</span><br><span class="line">    <span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.say);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">a</span>: <span class="string">'b'</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">'王'</span>, <span class="number">180</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">// &#123; a: 'b' &#125;</span></span><br></pre></td></tr></table></figure><p>但如果是强制显式返回原始值，那么就无法覆盖，依然输出隐式的<code>this</code>。</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, height</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.height = height;</span><br><span class="line">    <span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.say);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">'王'</span>, <span class="number">180</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person); <span class="comment">// Person &#123;name: '王', height: 180, say: f&#125;</span></span><br></pre></td></tr></table></figure><h2 id="包装类"><a href="#包装类" class="headerlink" title="包装类"></a>包装类</h2><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p>只有对象才有属性和方法，原始值不能有。</p><p>数字 number 包含原始值数字和数字对象。</p><ul><li>原始值数字不能有属性和方法。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">123</span>;</span><br><span class="line">num.name = <span class="string">'数字'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(num.name); <span class="comment">// undefiend</span></span><br></pre></td></tr></table></figure><ul><li>数字对象<code>new Number(...)</code>可以有属性和方法，且可以参与运算。不过运算完成后，它会变成原始值数字。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数字对象：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>); </span><br><span class="line"></span><br><span class="line">num.name = <span class="string">'数字'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// Number&#123;123, name: '数字'&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> num); <span class="comment">// object</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num * <span class="number">2</span>); <span class="comment">// 246</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>( num * <span class="number">2</span>)); <span class="comment">// number</span></span><br></pre></td></tr></table></figure><p>字符串 string 包含原始值字符串和字符串对象。</p><ul><li>原始值字符串不能有属性和方法。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'abcd'</span>;</span><br><span class="line">str.name = <span class="string">'字符串'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.name); <span class="comment">// undefiend</span></span><br></pre></td></tr></table></figure><ul><li>字符串对象<code>new String(...)</code>可以有属性和方法。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'abcd'</span>);</span><br><span class="line"></span><br><span class="line">str.name = <span class="string">'字符串'</span>;</span><br><span class="line">str.sayValue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str); <span class="comment">// String &#123;"abcd", name: "字符串", sayValue: f&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> str); <span class="comment">// object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = str.sayValue();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// 字符串</span></span><br></pre></td></tr></table></figure><p>布尔 boolean 同上。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bol = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">bol.name = <span class="string">'布尔'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bol); <span class="comment">// Boolean &#123;true, name: "布尔"&#125;</span></span><br></pre></td></tr></table></figure><blockquote><p>null 和 undefined 只有原始值，它们不会经过包装类，也就不会有对象，进而不会有原型，而对象的最终原型里的<code>toString()</code>方法也就无法使用。</p></blockquote>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">null</span>.name = <span class="string">'空'</span>; <span class="comment">// 报错：Uncaught TypeError: Cannot set property 'name' of null</span></span><br><span class="line"></span><br><span class="line"><span class="literal">undefined</span>.name = <span class="string">'未定义'</span>; <span class="comment">// 报错：Uncaught TypeError: Cannot set property 'name' of undefined</span></span><br></pre></td></tr></table></figure><h3 id="原始值与包装类"><a href="#原始值与包装类" class="headerlink" title="原始值与包装类"></a>原始值与包装类</h3><p>原始值不能有属性和方法，但是往原始值上面加了属性后没有报错，是因为经历了包装类的过程：</p><ol><li><p>第一步：原始值调用属性<code>num.len = 3;</code>，系统隐式地自动新增一个数字对象并赋值：<code>new Number(num).len = 3;</code>，紧接着将它删除：<code>delete</code>。</p></li><li><p>第二步：当你访问<code>num.len</code>这个属性时，系统又重新建立一个数字对象：<code>new Number(num).len</code>给你访问。</p></li><li><p>结果：访问一个对象没有的属性时，会输出<code>undefined</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//包装类</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">num.len = <span class="number">3</span>; <span class="comment">// new Number(num).len = 3; delete</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//new Number(num).len（这个 len 属性是自定义的，系统没有，所以访问不到)</span></span><br><span class="line"><span class="built_in">console</span>.log(num.len); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></li></ol><blockquote><p>经历过包装类后，不会报错，但最后结果一定是<code>undefined</code>。</p></blockquote><h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><p>例一：</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引用值</span></span><br><span class="line"><span class="comment">// 数组，通过 length 进行截断操作：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.length = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [1, 2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 原始值</span></span><br><span class="line"><span class="comment">// 字符串的 length 是在系统自动新增的字符串对象上截断，紧接着就删除了，和原来的字符串没关系：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'abcd'</span>;</span><br><span class="line">str.length = <span class="number">2</span>; <span class="comment">// new String('abcd').length = 2; delete  </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str); <span class="comment">// abcd</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// new String('abcd').length</span></span><br><span class="line"><span class="built_in">console</span>.log(str.length); <span class="comment">// 4 （字符串对象自带 length 属性，可以访问但截断的不是它）</span></span><br></pre></td></tr></table></figure><p>综合考察：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 闭包和构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, sex</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// var this = &#123;&#125;;</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sss</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        a ++;</span><br><span class="line">        <span class="built_in">console</span>.log(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.say = sss; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">// return this;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 函数 sss 是对象 this 的属性，因为隐式的 return this，所以会被返回出去，由此它与构造函数 Person 形成闭包</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> oPerson = <span class="keyword">new</span> Person();</span><br><span class="line">oPerson.say(); <span class="comment">// 1</span></span><br><span class="line">oPerson.say(); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新执行一次构造函数 Person，生成新的执行期上下文，和第一次的作用域链没关系</span></span><br><span class="line"><span class="comment">// 产生新的对象，新的闭包</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> oPerson1 = <span class="keyword">new</span> Person();</span><br><span class="line">oPerson1.say(); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      对象的创建和使用
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://cnlmx.top/categories/JavaScript/"/>
    
      <category term="学习笔记" scheme="https://cnlmx.top/categories/JavaScript/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="JavaScript" scheme="https://cnlmx.top/tags/JavaScript/"/>
    
      <category term="前端" scheme="https://cnlmx.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript笔记(四)闭包</title>
    <link href="https://cnlmx.top/post/1f0e/"/>
    <id>https://cnlmx.top/post/1f0e/</id>
    <published>2019-09-07T12:08:33.000Z</published>
    <updated>2020-05-20T03:41:42.669Z</updated>
    
    <content type="html"><![CDATA[<h2 id="立即执行函数"><a href="#立即执行函数" class="headerlink" title="立即执行函数"></a>立即执行函数</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>此类函数没有声明，在一次执行后即释放。是针对初始化功能的函数，适合做初始化工作。</p><p>立即执行函数和普通函数的唯一区别就在此：前者在一次执行后会释放，不能被反复调用，而普通函数会一直等待被执行。除此之外没有任何其他区别。</p><h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><p>第一种：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>第二种：（W3C 建议使用）</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure><p>如果需要返回值：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// num 用于接收返回值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = (<span class="function"><span class="keyword">function</span> (<span class="params">形参</span>) </span>&#123;  </span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> ..;</span><br><span class="line">&#125;(实参));</span><br></pre></td></tr></table></figure><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>只有表达式才能被执行符号<code>()</code>执行。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 函数声明：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">var</span> d = <span class="number">2</span> + <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(d);</span><br><span class="line">&#125;();</span><br><span class="line"><span class="comment">// 报错：Uncaught SyntaxError: Unexpected token )</span></span><br></pre></td></tr></table></figure>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> d = <span class="number">2</span> + <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test();<span class="comment">// 正常执行，test 就是一个表达式</span></span><br></pre></td></tr></table></figure><p>能被执行符号执行的表达式，函数名会被自动忽略。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'a'</span>); <span class="comment">// 输出 a</span></span><br><span class="line">&#125;();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(test); <span class="comment">// 输出 undefined</span></span><br></pre></td></tr></table></figure><p>有一种情况，函数声明和执行符号在一起，执行符号内填写了实参，系统运行时不会报错，会将执行符号识别为逗号运算符和小括号一起组成的表达式，如：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a, d, c, d</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(a + b + c + d);</span><br><span class="line">&#125;(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//系统会认为：</span></span><br><span class="line"><span class="comment">//这个是函数声明：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a, b, c, d</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a + b + c + d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个是表达式（逗号运算符的表现形式）：</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//最终，不会输出结果，也不会报错。</span></span><br></pre></td></tr></table></figure><blockquote><p>要在函数体后面加括号就能立即调用，则这个函数必须是函数表达式，不能是函数声明。（函数声明会被 js 解析时提升）</p></blockquote><p>()、!、+、-、= 等运算符，都可以将函数声明转换成表达式，然后在后面加执行符号<code>()</code>，就可以变成立即执行函数。如：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// () 运算符（包含着 function 的最外面那个括号）</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);   <span class="comment">// 123</span></span><br><span class="line">&#125;)(<span class="number">123</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// () 运算符（包含着 function 和执行符号的最外面那个括号）</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);   <span class="comment">// 1234</span></span><br><span class="line">&#125;(<span class="number">1234</span>));</span><br><span class="line"> </span><br><span class="line"><span class="comment">// ! 运算符</span></span><br><span class="line">! <span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);   <span class="comment">// 12345</span></span><br><span class="line">&#125;(<span class="number">12345</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// + 运算符</span></span><br><span class="line">+ <span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);   <span class="comment">// 123456</span></span><br><span class="line">&#125;(<span class="number">123456</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// - 运算符</span></span><br><span class="line">- <span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);   <span class="comment">// 1234567</span></span><br><span class="line">&#125;(<span class="number">1234567</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// = 运算符</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);   <span class="comment">// 12345678</span></span><br><span class="line">&#125;(<span class="number">12345678</span>);</span><br></pre></td></tr></table></figure><h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>内部的函数被保存到外部，一定生成闭包。</p><p>该函数在外部执行时，一定能调用它原来的没被保存出去时的函数环境里的变量。</p><h3 id="后果"><a href="#后果" class="headerlink" title="后果"></a>后果</h3><p>当内部函数被保存到外部时，将会生成闭包。闭包会导致原有作用链不释放，造成内存泄漏 Memory leak（过多占用内存）。</p><h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><p>例一：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;                           <span class="comment">// a 定义并开始执行  </span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;                       <span class="comment">// b 定义      </span></span><br><span class="line">        <span class="keyword">var</span> bbb = <span class="number">234</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(aaa);</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">var</span> aaa = <span class="number">123</span>;</span><br><span class="line">    <span class="keyword">return</span> b;                            <span class="comment">// b 作为 a 的结果被保存出去，此时 b 带着 a 的作用域链（b 只被定义，没被执行）   </span></span><br><span class="line">&#125;                                        <span class="comment">// a 执行完成，它与自己的 AO 链接被砍断（引用地址销毁）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> glob = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> demo = a();                          <span class="comment">// a 执行后的结果是 b，存到 demo 中</span></span><br><span class="line">demo();                                  <span class="comment">// 执行 b，执行结果为 123</span></span><br></pre></td></tr></table></figure><p>例二：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">100</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        num ++;  </span><br><span class="line">        <span class="built_in">console</span>.log(num);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> demo = a(); <span class="comment">// 把 b 的地址引用赋值给 demo</span></span><br><span class="line">demo(); <span class="comment">// 101</span></span><br><span class="line">demo() ;<span class="comment">// 102</span></span><br></pre></td></tr></table></figure><ul><li>b 被保存出去的时候带着的是 a 的作用域链。</li><li>demo 第一次执行时，增加 b 的 AO 到作用域链第 0 位，然后依次向下去找 num。</li><li>num = 100 在 b 继承的 aAO 里面，所以将其中的 num 修改为 101。</li><li>执行完成后，b 的 AO 被销毁，其他的作用域链 b 依然带着。</li><li>b 第二次执行时，是相同的操作，此时 num 的基础值是 101，执行 b 后 num ++ = 102</li></ul><h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>定义一个空数组 <code>arr = []</code>  (1*)</p><p>for 循环将十条数据添加到数组 arr 中，每条数据都是一个 function  (2*)</p><ul><li><code>arr[i]</code>中的 i 会跟着 for 循环中的 i 变动</li><li>而函数<code>function (){console.log(i)}</code>没有在当前执行，所以函数体内部的 i 不会随之变动，这个 i 在<strong>函数执行时才会赋值</strong></li><li><code>arr[i] = 函数</code>，数组位置会马上变现：<code>arr[0],arr[1]...</code>，函数<code>function()(...)</code>只是单纯赋值给数组，当前不会被执行： <code>arr[0] = function(){console.log(i);}</code> ……</li><li>i = 10 时，for 循环终止</li></ul><p>将 arr 返回到外部，这==十个函数带着 test 的作用域链==被保存出去  (3*)</p><ul><li><code>arr = [function(){console.log(i);}, function(){console.log(i);},..., function(){console.log(i);}]</code></li></ul><p>test 函数执行完成，它与自己的 AO 链接被砍断（地址引用销毁），此时 i 为 10  (4*)</p><p>分别执行保存出去的十个函数  (5*)</p><p>这十个函数都与 test 函数形成了闭包，它们共用的是 test 的作用域链（变量<code>arr</code>、<code>i</code>），所以在外部访问 i 变量时，访问的是 test 里的 i （也就是同一个 i ），它们自己的函数内部没有变量。</p><p>此时的 i 变量，是在 test 函数执行完成后的 i ，即 i = 10</p><p>arr 中的十个函数都是为了输出 i，在外部去访问 i 时，i 为 10，所以会输出十个 10</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = [];                                       <span class="comment">// 1*</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;                        <span class="comment">// 2*</span></span><br><span class="line">        arr[i] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;                                         <span class="comment">// 3*</span></span><br><span class="line">&#125;                                                       <span class="comment">// 4*</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myArr = test();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">    myArr[j]();                                         <span class="comment">// 5*</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果：10 10 10 10 10 10 10 10 10 10</span></span><br></pre></td></tr></table></figure><h4 id="解决：立即执行函数"><a href="#解决：立即执行函数" class="headerlink" title="解决：立即执行函数"></a>解决：立即执行函数</h4><p>引入立即执行函数<code>(function (j){...}(i));</code>   (1*)</p><p>for 循环执行，i = 0 时，立即执行函数中的实参 i 为 0，赋值给形参 j，此时 j = 0，依此类推，每次 i 的值都会被赋到相应的 j 上面  (2*)</p><ul><li>for 循环执行 10 次，会产生 10 个独立的不同的立即执行函数</li><li><code>arr[0] = function(){console.log(j);}</code>、<code>arr[1] = function(){console.log(j);}</code>……</li><li>同样，立即执行函数内的函数<code>function (){...}</code>没有在当前执行</li><li>i = 10 时，for 循环终止</li></ul><p>将 arr 返回到外部，十个函数带着各自的立即执行函数的作用域链被保存出去  (3*)</p><ul><li><code>arr = [function(){console.log(j);}, function(){console.log(j);},..., function(){console.log(j);}]</code></li></ul><p>test 函数执行完成，它与自己的 AO 链接被砍断（地址引用销毁），此时 i 为 10  (4*)</p><p>分别执行这十个函数  (5*)</p><p>被保存出去的十个函数都与各自的立即执行函数形成了闭包，它们带出去的是各自的立即执行函数<code>(function(j){...}(i));</code>的作用域链（变量<code>j</code>、<code>arr</code>、<code>i</code>），<code>i</code>和<code>arr</code>在 test 函数的 AO 中，<code>j</code>在立即执行函数的 AO 中。所以在外部访问 i 变量时，访问的依然是 test 函数的 i ，而 j 变量则是各自立即执行函数里的 j</p><p>i = 0 时，j = 0，即第一个立即执行函数中的 j 为 0，执行完成后销毁。i = 1 时，又是一个全新的立即执行函数，此时 j = 1。依此类推，被保存出去的函数，对应的是不同的 j ，相同的 i</p><pre><code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123; </span><br><span class="line">        (<span class="function"><span class="keyword">function</span> (<span class="params">j</span>) </span>&#123;                                 <span class="comment">// 1*</span></span><br><span class="line">            arr[j] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;(i));                                          <span class="comment">// 2*</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;                                         <span class="comment">// 3*</span></span><br><span class="line">&#125;                                                       <span class="comment">// 4*</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myArr = test();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> x = <span class="number">0</span>; x &lt; <span class="number">10</span>; x++)&#123;</span><br><span class="line">    myArr[x]();                                         <span class="comment">// 5*</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果：0 1 2 3 4 5 6 7 8 9</span></span><br></pre></td></tr></table></figure></code></pre><blockquote><p>关键点：将每一次 i 的值立马套现到 j 里面，然后让每个函数带着不同的 j 走</p></blockquote><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><h4 id="实现共有变量"><a href="#实现共有变量" class="headerlink" title="实现共有变量"></a>实现共有变量</h4><p>如：函数累加器。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        count ++; <span class="comment">// demo 函数中没有变量，这个是针对 add 函数里的 count 变量的操作</span></span><br><span class="line">        <span class="built_in">console</span>.log(count);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> demo;</span><br><span class="line">&#125;</span><br><span class="line">      </span><br><span class="line"><span class="keyword">var</span> counter = add();</span><br><span class="line">counter();<span class="comment">// 1</span></span><br><span class="line">counter();<span class="comment">// 2</span></span><br><span class="line">counter();<span class="comment">// 3</span></span><br><span class="line">counter();<span class="comment">// 4</span></span><br></pre></td></tr></table></figure><h4 id="做缓存（存储结构）"><a href="#做缓存（存储结构）" class="headerlink" title="做缓存（存储结构）"></a>做缓存（存储结构）</h4><p>函数 a 和 b 被保存出去的时候，带着的是同一套作用域链（都是 test 的，在同一个房间，同一个地址引用）</p><p>a 执行 时 num 被修改为 101，那么 b 作用域链中的 num 也会变为 101</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">100</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">      <span class="comment">// a defined   a.[[scope]]    0: testAO</span></span><br><span class="line">      <span class="comment">//                            1: GO</span></span><br><span class="line">        num ++;</span><br><span class="line">        <span class="built_in">console</span>.log(num);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// b defined   b.[[scope]]     0: testAO</span></span><br><span class="line">      <span class="comment">//                             1: GO</span></span><br><span class="line">        num --;</span><br><span class="line">        <span class="built_in">console</span>.log(num);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> [a,b];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myArr = test();</span><br><span class="line"></span><br><span class="line">myArr[<span class="number">0</span>](); <span class="comment">// a 函数执行 -&gt; 结果 101</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// a doing   a.[[scope]]     0: aAO</span></span><br><span class="line"><span class="comment">//                           1: testAO *</span></span><br><span class="line"><span class="comment">//                           2: GO</span></span><br><span class="line"></span><br><span class="line">myArr[<span class="number">1</span>](); <span class="comment">// b 函数执行 -&gt; 结果 100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// b doing   b.[[scope]]     0: bAO</span></span><br><span class="line"><span class="comment">//                           1: testAO *</span></span><br><span class="line"><span class="comment">//                           2: GO</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// * b 使用的 testAO 是 a 执行后修改的 testAO</span></span><br></pre></td></tr></table></figure><p>被保存出去的函数内部没有定义变量，修改的都是 test 函数里的变量 food</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eater</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> food = <span class="string">'apple'</span>;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;</span><br><span class="line">        eatFood : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(food != <span class="string">''</span>)&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'I am eating '</span> + food);</span><br><span class="line">                food = <span class="string">''</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Nothing!'</span>);</span><br><span class="line">            &#125; </span><br><span class="line">        &#125;,</span><br><span class="line">        pushFood : <span class="function"><span class="keyword">function</span> (<span class="params">myFood</span>) </span>&#123;</span><br><span class="line">            food = myFood;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = eater();</span><br><span class="line"></span><br><span class="line">person.eatFood(); <span class="comment">// I am eating apple</span></span><br><span class="line"></span><br><span class="line">person.eatFood(); <span class="comment">// Nothing!</span></span><br><span class="line"></span><br><span class="line">person.pushFood(<span class="string">'banana'</span>);</span><br><span class="line">person.eatFood(); <span class="comment">// I am eating banana</span></span><br><span class="line"></span><br><span class="line">person.eatFood(); <span class="comment">// Nothing!</span></span><br></pre></td></tr></table></figure><h4 id="实现封装，属性私有化"><a href="#实现封装，属性私有化" class="headerlink" title="实现封装，属性私有化"></a>实现封装，属性私有化</h4><p>隐式对象<code>this</code>被保存出去，它包含的两个方法（函数）<code>changeUseCard</code>以及<code>sayUseCard</code>带着同一套作用域链出去（函数<code>BankCard</code>的）。</p><p>变量<code>useCard</code>在函数外部是无法访问到的，但是函数内的方法可以直接使用它。</p><p>它成为对象和原有函数形成闭包后存在的一个私有变量。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BankCard</span>(<span class="params">name, card</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> useCard = <span class="string">'Visa'</span>; <span class="comment">// 构造函数内声明并赋值的变量</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.card = card;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.changeUseCard = <span class="function"><span class="keyword">function</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">        useCard = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.sayUseCard = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(useCard);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dou = <span class="keyword">new</span> BankCard(<span class="string">'dou'</span>, <span class="string">'Master'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dou); <span class="comment">// &#123;name: 'dou', card: 'Master', changeUseCard: f, sayUseCard: f&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(dou.useCard); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line">dou.sayUseCard(); <span class="comment">// Visa</span></span><br><span class="line"></span><br><span class="line">dou.changeUseCard(<span class="string">'Apple Card'</span>);</span><br><span class="line"></span><br><span class="line">dou.sayUseCard(); <span class="comment">// Apple Card</span></span><br></pre></td></tr></table></figure><h4 id="模块化开发"><a href="#模块化开发" class="headerlink" title="模块化开发"></a>模块化开发</h4><p>实现模块化开发，防止污染全局变量。（详见命名空间）</p>]]></content>
    
    <summary type="html">
    
      立即执行函数｜闭包
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://cnlmx.top/categories/JavaScript/"/>
    
      <category term="学习笔记" scheme="https://cnlmx.top/categories/JavaScript/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="JavaScript" scheme="https://cnlmx.top/tags/JavaScript/"/>
    
      <category term="前端" scheme="https://cnlmx.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript笔记(三)函数</title>
    <link href="https://cnlmx.top/post/b323/"/>
    <id>https://cnlmx.top/post/b323/</id>
    <published>2019-08-25T08:21:35.000Z</published>
    <updated>2020-05-20T03:41:31.443Z</updated>
    
    <content type="html"><![CDATA[<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>函数主要用于减少重复代码。</p><p>在 JavaScript 中，函数是头等对象，因为它们可以像任何其他对象一样具有属性和方法。它们与其他对象的区别在于函数可以被调用。简而言之，它们是<code>Function</code>对象。</p><p>定义一个函数并不会自动的执行它。定义了函数仅仅是赋予函数以名称并明确函数被调用时该做些什么。调用函数才会以给定的参数真正执行这些动作。</p><h3 id="两种定义形式"><a href="#两种定义形式" class="headerlink" title="两种定义形式"></a>两种定义形式</h3><p>函数声明</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名 (<span class="params">参数<span class="number">1</span>, 参数<span class="number">2</span>, 参数<span class="number">3</span>, ...</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 函数体;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>函数表达式</p><ul><li>命名函数表达式：</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 = <span class="function"><span class="keyword">function</span> 函数名(<span class="params">参数<span class="number">1</span>, 参数<span class="number">2</span>, 参数<span class="number">3</span>, ...</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 函数体;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 函数名仅用作函数名称，并不执行，也不一定要和变量名一样</span></span><br><span class="line"><span class="comment">// 变量名.name = 函数名</span></span><br></pre></td></tr></table></figure><ul><li>匿名函数表达式 — 常用，故后续直接叫函数表达式：</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 = <span class="function"><span class="keyword">function</span>(<span class="params">参数<span class="number">1</span>, 参数<span class="number">2</span>, 参数<span class="number">3</span>, ...</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 函数体;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 变量名.name = 函数名</span></span><br></pre></td></tr></table></figure><p>关于函数名和变量名：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = <span class="function"><span class="keyword">function</span> <span class="title">fnName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(test.name); <span class="comment">// fnName</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> demo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(demo.name); <span class="comment">// demo</span></span><br></pre></td></tr></table></figure><p>表达式的值就是函数本身。函数表达式就是创建一个函数，将其赋值给变量，用<code>变量名()</code>来调用。函数是一个引用类型，将其赋值给某个变量时，变量中保存的是函数的地址。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span>(foo); </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(foo)); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(f()); <span class="comment">// function</span></span><br></pre></td></tr></table></figure><blockquote><p>命名函数表达式的识别名（也就是上例的函数名），它的作用域只能在函数的主体(FunctionBody)内部，真正的函数识别名称是被赋值的那个变量识别名（也就是变量名）。</p></blockquote><h3 id="组成形式"><a href="#组成形式" class="headerlink" title="组成形式"></a>组成形式</h3><p>函数名称。</p><p>参数：不限制数据类型、不限制参数多少。</p><ul><li><p>形式参数：相当于 var 声明变量。<code>形参长度 = 函数名.length</code></p></li><li><p>实际参数：实际参数列表 arguments，类似数组，会将所有实际参数存储起来。</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a + b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test(<span class="number">1</span>, <span class="number">2</span>);<span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// test -&gt; 函数名称</span></span><br><span class="line"><span class="comment">// a,b -&gt; 形式参数</span></span><br><span class="line"><span class="comment">// 1,2 -&gt; 实际参数</span></span><br></pre></td></tr></table></figure><p>在形式参数和实际参数长度完全相等的时候，<code>arguments</code>和实际参数有一个映射规则，如果<code>arguments</code>内的参数发生变化，相应的实际参数也会改变。反之同理。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实参改变，arguments 内的参数也随之改变</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    a = <span class="number">4</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]); <span class="comment">// 4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// arguments 内参数改变，实参也随之改变</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>] = <span class="number">4</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">// 4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><p><code>arguments</code>一开始有多少位参数，就会一直保持这个长度，如果实参数量小于形参，后续增加的实际参数不会添到列表里，即此时不会存在映射关系。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    b = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">1</span>]); <span class="comment">// undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>返回值：需要函数有返回值的时候，可以在函数体里使用<code>return</code>语句。<code>return</code>既可以终止函数，还可以得到函数返回值。</p><ul><li>终止函数：</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 终止函数，console.log('b'); 不会被执行</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'a'</span>); <span class="comment">// a</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'b'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><ul><li>函数返回值：将一个值返回到函数外面。记得要找一个变量接收它。这个时候既终止了函数，又得到了函数返回值。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myNumber</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> +target;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = myNumber(<span class="string">'123'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num), num); <span class="comment">// number 123</span></span><br></pre></td></tr></table></figure><blockquote><p>如果<code>return</code>后面不跟任何数据，或者函数中没有 <code>return</code>语句，则该函数会在末尾自动 return undefined。如果找一个变量接收它，就会得到 undefined 的结果。</p></blockquote><h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><p>递归只是让函数更加简洁，并没有减少响应时间，所以特别复杂的程序不能使用递归。</p><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>写一个函数，实现斐波那契数列（1、1、2、3、5、8……）。</p><p>找规律：<code>fb(n) = fb(n - 1) + fb(n - 2);</code></p><ul><li>发现可以采用递归 -&gt; return 公式：<code>return fb(n - 1) + fb(n - 2);</code></li><li>测试公式</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fb(<span class="number">5</span>) =&gt; fb(<span class="number">4</span>) + fb(<span class="number">3</span>);</span><br><span class="line">fb(<span class="number">4</span>) =&gt; fb(<span class="number">3</span>) + fb(<span class="number">2</span>);</span><br><span class="line">fb(<span class="number">3</span>) =&gt; fb(<span class="number">2</span>) + fb(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>找出口：<code>n === 1 || n === 2</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fb</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n === <span class="number">1</span> || n === <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fb(n - <span class="number">1</span>) + fb(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">result = fb(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>每个函数都是一个对象，对象中有些属性我们可以访问，有些不可以。这些不可访问的属性仅供 JS 引擎存取，<code>[[scope]]</code>就是其中一个。<strong><code>[[scope]]</code>指的就是我们所说的作用域，其中存储了运行期（执行期）上下文的集合</strong>。</p><h3 id="执行期上下文"><a href="#执行期上下文" class="headerlink" title="执行期上下文"></a>执行期上下文</h3><p>当函数执行时，会创建一个称为执行期上下文的内部对象（AO）。一个执行期上下文定义了一个函数执行时的环境，函数==每次执行时对应的执行上下文都是独一无二的==，所以<strong>多次调用一个函数会导致创建多个执行上下文，当函数执行完毕，执行上下文被销毁。</strong></p><h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h3><p><code>[[scope]]</code>中所存储的执行期上下文的对象的集合，这个集合呈链式链接，我们把这种链式链接叫做作用域链。</p><h3 id="查找变量"><a href="#查找变量" class="headerlink" title="查找变量"></a>查找变量</h3><p>在哪个函数里查找变量，就从该函数的作用域链的顶端依次向下查找。</p><h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3><p>函数如下：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">        c();</span><br><span class="line">    &#125;</span><br><span class="line">    b();</span><br><span class="line">&#125;</span><br><span class="line">a();</span><br></pre></td></tr></table></figure><p>a 函数在被定义时，<code>a.[[scope]]</code>里第 0 位存储了全局的执行期上下文（GO）。</p><p>a 函数执行时，它的执行期上下文（AO）放入<code>a.[[scope]]</code>里的顶端，即第 0 位，GO 下移一位，到第 1 位。</p><p>此时若在 a 函数里查找一个变量，就需要在 a 的作用域链里查找，先在第 0 位 AO 中找，没有的话再去第 1 位 GO 中找。</p><p>而对于 a 函数中的 b 函数，==a 函数执行时，b 函数被定义==，此时 b 函数的全局执行期上下文就是 a 的作用域链，即<code>b.[[scope]] === a.[[scope]]</code>（同一个作用域链，是同一个房间内的）。</p><p>b 函数执行时，它的执行期上下文放入<code>b.[[scope]]</code>的第 0 位，原有的依次下移一位。</p><p>b 函数执行完毕后，销毁它自己的 AO（链接被砍断，也就是删除引用），b 又回到被定义状态，等待下一次被执行。</p><p>a 函数执行完毕后，销毁它自己的 AO，由于引用被删除，AO 里面的 b 函数和 c 函数都被砍断，所以这俩函数都没了。a 回到了被定义状态，等待下一次被执行。当 a 函数需要再次执行时，又会生成新的 AO（里面又会有新的 b 函数和 c 函数出现）。</p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">a defined（定义）    a.[[scope]] -&gt; 0 : GO</span><br><span class="line"></span><br><span class="line">a doing（执行）      a.[[scope]] -&gt; 0 : aAO</span><br><span class="line">                                   1 : GO</span><br><span class="line"></span><br><span class="line">b defined           b.[[scope]] -&gt; 0 : aAO</span><br><span class="line">                                   1 : GO</span><br><span class="line"></span><br><span class="line">b doing             b.[[scope]] -&gt; 0 : bAO</span><br><span class="line">                                   1 : aAO</span><br><span class="line">                                   2 : GO</span><br><span class="line"></span><br><span class="line">c defined           c.[[scope]] -&gt; 0 : bAO</span><br><span class="line">                                   1 : aAO</span><br><span class="line">                                   2 : GO</span><br><span class="line"></span><br><span class="line">c doing             c.[[scope]] -&gt; 0 : cAO</span><br><span class="line">                                   1 : bAO</span><br><span class="line">                                   2 : aAO</span><br><span class="line">                                   3 : GO</span><br></pre></td></tr></table></figure><blockquote><p>注意，function 是引用值，即值存储在 heap（堆），而在 stack（栈）里放的是堆地址，也就是引用。</p></blockquote><h2 id="预编译"><a href="#预编译" class="headerlink" title="预编译"></a>预编译</h2><h3 id="JS-运行执行步骤"><a href="#JS-运行执行步骤" class="headerlink" title="JS 运行执行步骤"></a>JS 运行执行步骤</h3><ol><li>语法分析（通篇扫描一遍，看看有没有啥错误）</li><li>预编译</li><li>解释执行</li></ol><h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><p>暗示全局变量（imply global）：任何变量，如果未声明就赋值，那么此变量就为全局对象（window）所有。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a 未经声明但直接赋值</span></span><br><span class="line">a = <span class="number">123</span>;</span><br><span class="line"><span class="comment">// 即：</span></span><br><span class="line"><span class="built_in">window</span> = &#123;</span><br><span class="line">    a: <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.a = <span class="number">123</span>;</span><br></pre></td></tr></table></figure><p>所有声明了的全局变量，也为 window 所有。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b 为声明了的全局变量</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">234</span>;</span><br><span class="line"><span class="comment">// 即：</span></span><br><span class="line"><span class="built_in">window</span> = &#123;</span><br><span class="line">    b: <span class="number">234</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.b = <span class="number">234</span>;</span><br></pre></td></tr></table></figure><p>上面两种都是全局对象 window 的属性（属性名+属性值），window 相当于是全局的域。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c = <span class="number">456</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = b = <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line">test()</span><br><span class="line"><span class="comment">// 123 赋值给 b</span></span><br><span class="line"><span class="comment">// 声明 a</span></span><br><span class="line"><span class="comment">// b 赋值给 a</span></span><br><span class="line"><span class="comment">// 导致的结果就是：b 未经声明</span></span><br><span class="line"><span class="comment">// 此时：b 归 window 所有</span></span><br><span class="line"><span class="comment">// a 为局部变量</span></span><br><span class="line"><span class="comment">// c 为全局变量，也归 window 所有</span></span><br></pre></td></tr></table></figure><h3 id="预编译过程"><a href="#预编译过程" class="headerlink" title="预编译过程"></a>预编译过程</h3><h4 id="函数内"><a href="#函数内" class="headerlink" title="函数内"></a>函数内</h4><p>函数内的预编译发生在函数执行的前一刻。</p><p>步骤：找形参和变量声明，值为 undefined -&gt; 实参值传给形参 -&gt; 找函数声明。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a</span>) </span>&#123; <span class="comment">// a 形式参数</span></span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">123</span>; <span class="comment">// 变量声明</span></span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">// 函数声明</span></span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125; <span class="comment">// 变量声明、函数表达式</span></span><br><span class="line">    <span class="built_in">console</span>.log(b);</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">// 函数声明</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn(<span class="number">1</span>); <span class="comment">// 1 实际参数</span></span><br></pre></td></tr></table></figure><ul><li><p>创建 AO 对象（Activation Object）：执行期上下文，可理解为作用域。</p></li><li><p>找形式参数和变量声明，将形式参数名和变量名作为 AO 属性名，值为  undefined。（变量声明提升）</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AO = &#123;</span><br><span class="line">    a: <span class="literal">undefined</span>,</span><br><span class="line">    b: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>将实际参数和形式参数统一。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AO = &#123;</span><br><span class="line">    a: <span class="number">1</span>, <span class="comment">//undefined</span></span><br><span class="line">    b: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>在函数体里找函数声明，将函数名作为 AO 属性名，值为自身的函数体（函数声明提升）</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AO = &#123;</span><br><span class="line">    a: <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;, <span class="comment">// 1</span></span><br><span class="line">    b: <span class="literal">undefined</span>,</span><br><span class="line">    d: <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>执行。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(a); </span><br><span class="line">    <span class="comment">//执行，访问 a，输出此时 AO 对象中 a 的值 -&gt; function a() &#123;&#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">123</span>; </span><br><span class="line">    <span class="comment">//var = a 变量声明已提升，忽略。</span></span><br><span class="line">    <span class="comment">//执行赋值操作，将 123 赋值给 a</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(a); </span><br><span class="line">    <span class="comment">// 输出此时 AO 对象中 a 的值 -&gt; 123</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125; </span><br><span class="line">    <span class="comment">// 已提升（提前执行），忽略</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(a); </span><br><span class="line">    <span class="comment">// 输出此时 AO 对象中 a 的值 -&gt; 123</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125; </span><br><span class="line">    <span class="comment">//var = b 已提升，忽略。</span></span><br><span class="line">    <span class="comment">//执行赋值操作，将 function ()&#123;&#125; 赋值给 b</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(b);</span><br><span class="line">    <span class="comment">//输出此时 AO 对象中 b 的值 -&gt; function ()&#123;&#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;&#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// AO = &#123;</span></span><br><span class="line"><span class="comment">//     a : 123, // function a() &#123;&#125;</span></span><br><span class="line"><span class="comment">//     b : function ()&#123;&#125;, // undefined</span></span><br><span class="line"><span class="comment">//     d : function d() &#123;&#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><h4 id="全局内"><a href="#全局内" class="headerlink" title="全局内"></a>全局内</h4><p>全局内的预编译发生在全局执行的前一刻。</p><p>步骤：找变量声明，值为 undefined -&gt; 找函数声明。</p><ul><li>创建 GO 对象（Global Object）：全局执行期上下文，可理解为作用域。（GO 就是 window ）</li><li>找变量声明，将变量名作为 GO 属性名，值为 undefined。（变量声明提升）。</li><li>找函数声明，将函数名作为 GO 属性名，值为自身的函数体（函数声明提升）。</li><li>执行。</li></ul><p>GO 发生在全局执行前，AO 发生在函数执行前，如果 AO 内找不到，会直接在 GO 中找。</p><h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><p>通过函数声明定义的函数，会提升到脚本块的顶部。</p><p>通过函数声明定义的函数，会成为全局对象的属性。</p><p>通过函数表达式定义的函数，它既不会提升，也不会污染全局对象。</p><h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><p>例一：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GO = &#123;</span></span><br><span class="line"><span class="comment">//     a: 10, // undefined</span></span><br><span class="line"><span class="comment">//     c: 234,</span></span><br><span class="line"><span class="comment">//     test: function test()&#123;...&#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(b); <span class="comment">// undefined</span></span><br><span class="line">    <span class="keyword">if</span> (a) &#123;</span><br><span class="line">        <span class="keyword">var</span> b = <span class="number">100</span>; <span class="comment">// 预编译环节，不管是否执行，只先拿出所有该拿的：var = b;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(b); <span class="comment">// undefined</span></span><br><span class="line">    c = <span class="number">234</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(c); <span class="comment">// 234</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// AO = &#123;</span></span><br><span class="line"><span class="comment">//     b: undefined</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">test();</span><br><span class="line">a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(c); <span class="comment">// 234</span></span><br></pre></td></tr></table></figure><p>例二：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GO = &#123;</span></span><br><span class="line"><span class="comment">//     a: 100, // undefined</span></span><br><span class="line"><span class="comment">//     demo: function demo(e)&#123;&#125;,</span></span><br><span class="line"><span class="comment">//     f: 123</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">100</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">e</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>] = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(e); <span class="comment">// 2</span></span><br><span class="line">    <span class="keyword">if</span> (a) &#123;</span><br><span class="line">        <span class="keyword">var</span> b = <span class="number">123</span>;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">// if 语句中不能声明 function</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> c;</span><br><span class="line">    a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">var</span> a;</span><br><span class="line">    <span class="built_in">console</span>.log(b); <span class="comment">// undefined</span></span><br><span class="line">    f = <span class="number">123</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(c); <span class="comment">// undefined</span></span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">// 10</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// AO = &#123;</span></span><br><span class="line"><span class="comment">//     e: 2, // function e()&#123;&#125; // 1 // undefined</span></span><br><span class="line"><span class="comment">//     b: undefined,</span></span><br><span class="line"><span class="comment">//     c: undefined,</span></span><br><span class="line"><span class="comment">//     a: 10//undefined</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">demo(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 100</span></span><br><span class="line"><span class="built_in">console</span>.log(f); <span class="comment">// 123</span></span><br></pre></td></tr></table></figure><p>例三：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 会进行预编译，所以不会按照视觉上的先后顺序运行</span></span><br><span class="line"><span class="comment">// 两个相同的函数，提升后第一个函数会被第二个函数覆盖掉</span></span><br><span class="line"><span class="comment">// 最终都是第二个函数进行的调用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// GO = &#123;</span></span><br><span class="line"><span class="comment">//     x: 1, // undefined</span></span><br><span class="line"><span class="comment">//     y: 4, // 0, // undefined</span></span><br><span class="line"><span class="comment">//     z: 4, // 0,</span></span><br><span class="line"><span class="comment">//     add: function add(n)&#123;return n = n + 3&#125; // function add(n)&#123;return n = n + 1&#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>, y = z = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span>  n = n + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">y = add(x); <span class="comment">// 1 + 3 -&gt; y = 4</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n = n + <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">z = add(x); <span class="comment">// 1 + 3 -&gt; z = 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// AO = &#123;</span></span><br><span class="line"><span class="comment">//     n: x // undefined</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(x, y, z); <span class="comment">// 1, 4, 4</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      函数定义｜作用域｜预编译
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://cnlmx.top/categories/JavaScript/"/>
    
      <category term="学习笔记" scheme="https://cnlmx.top/categories/JavaScript/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="JavaScript" scheme="https://cnlmx.top/tags/JavaScript/"/>
    
      <category term="前端" scheme="https://cnlmx.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript笔记(二)数据类型</title>
    <link href="https://cnlmx.top/post/5714/"/>
    <id>https://cnlmx.top/post/5714/</id>
    <published>2019-08-09T04:53:29.000Z</published>
    <updated>2020-05-20T03:41:02.830Z</updated>
    
    <content type="html"><![CDATA[<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="原始值"><a href="#原始值" class="headerlink" title="原始值"></a>原始值</h3><p>不可改变， 存储在 stack（栈）：先进的后出来。</p><p>值类型：</p><ol><li>Number — 数字</li><li>Boolean — 布尔</li><li>String — 字符串</li><li>undefined — 未定义（未被赋值的变量值输出时会有这个结果）</li><li>null — 空（可以用来占位）</li></ol><h3 id="引用值"><a href="#引用值" class="headerlink" title="引用值"></a>引用值</h3><p>存储在 heap（堆）：怎么进的怎么出。</p><p>值类型：</p><ol><li>Array — 数组</li><li>Object — 对象</li><li>Function — 函数</li><li>RegExp — 正则</li><li>Date — 日期</li></ol><h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><p>原始值和引用值唯一的不同是赋值形式不同。</p><p>原始值以值的拷贝方式赋值，原值是不可变的。操作都在副本上。引用值以引用的拷贝方式赋值，原值是可变的。引用的是地址，操作还是在原来的地方，除非换一个地址（赋新值）。</p><h4 id="原始值-1"><a href="#原始值-1" class="headerlink" title="原始值"></a>原始值</h4><p>一旦赋值，不可更改。无论是原值增删，还是新的赋值，都会直接存放到新的地方，原值不动。在操作上，表现为原始值和对应栈名复制一份到新的地方，同时之前的对应栈名初始化，值不动，增删和新赋值都在副本上进行。如：</p><ul><li>在栈内存中声明一个叫 num 的房间，放入值 1</li><li>在栈内存中声明一个叫 num1 的房间，拷贝 num 的值 1 放入 num1</li><li>将 num 及其值 1 拷贝到一个新的房间，然后修改值为 2，原来的房间名初始化为 1005，原值 1 依然留在该房间，不会发生变化</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>,</span><br><span class="line">      num1 = num;</span><br><span class="line">num = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num1); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h4 id="引用值-1"><a href="#引用值-1" class="headerlink" title="引用值"></a>引用值</h4><p>赋值之后，如果是在原值上增删，会直接修改原值。如果是新的赋值，就会直接存放到新的地方，原值不动。</p><p>原值增删：</p><ul><li>在栈内存中声明一个叫 arr 的房间，在堆内存中一个房间里放入值 [1, 2]，然后 arr 房间内放入这个值的==堆内存地址==<code>heap1001</code></li><li>在栈内存中声明一个叫 arr1 的房间，然后直接拷贝 arr 房间内存放的地址<code>heap1001</code>，获得 arr 的值</li><li>此时 arr 与 arr1 指向同一个值的地址<code>heap1001</code></li><li>arr 增加新值 3，直接在<code>heap1001</code>存放的值里增加，变为 [1, 2, 3]</li><li>此时 arr 与 arr1 共同指向的值变为 [1, 2, 3]</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">   arr1 = arr;</span><br><span class="line">arr.push(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.write(arr1); <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>赋新值：</p><ul><li>在栈内存中声明一个叫 arr 的房间，在堆内存中一个房间里放入值 [1, 2]，然后 arr 房间内放入堆内存地址<code>heap1001</code></li><li>在栈内存中声明一个叫 arr1 的房间，然后直接拷贝 arr 房间内存放的地址，获得 arr 的值</li><li>此时 arr 与 arr1 指向同一个值的地址<code>heap1001</code></li><li>arr 赋新值，在堆内存中另一个房间里放入新值 [1, 2, 3]，然后 arr 房间内删除原来的地址<code>heap1001</code>，放入这个新值的堆内存地址<code>heap1002</code></li><li>此时 arr 指向的值为 [1, 2, 3]，arr1 指向的值为 [1, 2]</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>],</span><br><span class="line">   arr1 = arr;</span><br><span class="line">arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="built_in">document</span>.write(arr1); <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure><h2 id="typeof-操作符"><a href="#typeof-操作符" class="headerlink" title="typeof 操作符"></a>typeof 操作符</h2><p>作用：区分数据类型（六种）</p><ul><li>number</li><li>string</li><li>boolean</li><li>undefined</li><li>object（泛指引用值，数组 array 和 null 都属于此类）</li><li>function  </li></ul><p>原始值：<code>number/string/boolean/undefined/null</code></p><p>引用值：<code>array/object/function</code></p><blockquote><p>null 最初是作为代替空对象的形式出现（给对象占位），所以它的数据类型是 object</p></blockquote><p>写法：<code>typeof()</code> 或者 <code>typeof 内容</code></p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num)); <span class="comment">// function</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mul = <span class="literal">null</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> mul); <span class="comment">// object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(arr)); <span class="comment">// objcet</span></span><br></pre></td></tr></table></figure><blockquote><p>任何变量未经声明就使用的话，会直接报错。<br>如果放入 typeof 操作符中，不会报错，会直接返回<code>undefined</code>。<br>这个返回值<code>undefined</code>的类型是字符串。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(a),<span class="keyword">typeof</span>(<span class="keyword">typeof</span>(a))); <span class="comment">// undefined string</span></span><br></pre></td></tr></table></figure><p>任何情况下，返回的六种类型的值都是字符串类型。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'abc'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(str), <span class="keyword">typeof</span>(<span class="keyword">typeof</span>(str))); <span class="comment">// string string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bool = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(bool), <span class="keyword">typeof</span>(<span class="keyword">typeof</span>(bool))); <span class="comment">// boolean string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">7</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num), <span class="keyword">typeof</span>(<span class="keyword">typeof</span>(num))); <span class="comment">// number string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> obj, <span class="keyword">typeof</span>(<span class="keyword">typeof</span> obj)); <span class="comment">// object string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> fn, <span class="keyword">typeof</span>(<span class="keyword">typeof</span> fn)); <span class="comment">// function string</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">undefined</span>, <span class="keyword">typeof</span>(<span class="keyword">typeof</span> <span class="literal">undefined</span>)); <span class="comment">// undefined string</span></span><br></pre></td></tr></table></figure><h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><h3 id="显示"><a href="#显示" class="headerlink" title="显示"></a>显示</h3><p>Number( )：将括号里的内容转换成数字/数。</p><ul><li><code>undefined、字符串（除了字符串类型的数字）、NaN-&gt; NaN</code> </li><li><code>true -&gt; 1</code></li><li><code>false、&quot;&quot;、null -&gt; 0</code></li><li><code>&quot;123&quot; -&gt; 123（字符串类型的数字直接转换类型，数值不变）</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="built_in">Number</span>(<span class="literal">true</span>); <span class="comment">// 布尔类型</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num),num); <span class="comment">// number 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="built_in">Number</span>(<span class="string">'true'</span>); <span class="comment">// 字符串类型</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num),num); <span class="comment">// number NaN</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(<span class="string">'123abc'</span>)); <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(<span class="literal">null</span>)); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><p>parseInt (string, radix)：（integer：整数）</p><ul><li>第一个作用：string 参数，转换成整值（如果前面是数字，从数字位开始看，直到非数字位截止，返回数字位）</li><li>第二个作用：radix 进制，以此进制为基底，将值转换为十进制，取值：2～36，选填。划重点：你填的多少，进制就是多少。从你填的转为十进制。目标进制（你填写的进制） &lt;==&gt; 十进制</li><li>常见转换：<ul><li><code>&quot;123.7&quot;-&gt; 123</code> </li><li><code>&quot;123abc&quot; -&gt; 123（首位是数字的话，从数字位开始看，在非数字位截断）</code></li><li><code>其他 -&gt; NaN</code></li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="built_in">parseInt</span>(<span class="literal">true</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num) + <span class="string">': '</span> + num); <span class="comment">// number: NaN</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(<span class="string">'123.9'</span>)); <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(<span class="string">'123abc'</span>)); <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="built_in">parseInt</span>(<span class="string">'abc123'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num) + <span class="string">': '</span> + num); <span class="comment">// number: NaN</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="built_in">parseInt</span>(<span class="string">'a'</span>,<span class="number">16</span>); <span class="comment">// a 目前为十六进制数，要转化为十进制数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num) + <span class="string">': '</span> + num); <span class="comment">// number: 10</span></span><br></pre></td></tr></table></figure><p>parseFloat(string)：类似 parseInt 方法，转换成浮点数（正常的小数）。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="built_in">parseFloat</span>(<span class="string">'123.45'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num) + <span class="string">': '</span> + num); <span class="comment">// number: 123.45</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="built_in">parseFloat</span>(<span class="string">'123.45abc'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num) + <span class="string">': '</span> + num); <span class="comment">// number: 123.45</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="built_in">parseFloat</span>(<span class="string">'abc123.45'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num) + <span class="string">': '</span> + num); <span class="comment">// number : NaN</span></span><br></pre></td></tr></table></figure><p>参数.toString(radix)：将参数转换成字符串</p><ul><li>radix 进制，以十进制为基底，转换成填写的进制，选填。<br>十进制&lt;==&gt;目标进制（你填写的进制）划重点：你填的多少，就是想要多少。从十进制转为你填的。</li><li>undefined 和 null 不能用该方法，使用会直接报错（因为它俩没有原型，而其他原始值经过包装类后成为原始值对象，都有原型）</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> demo = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> num = demo.toString();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num) + <span class="string">': '</span> + num); <span class="comment">// string: 123</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> demo = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> num = demo.toString(<span class="number">16</span>);<span class="comment">// 10 目前为十进制数，要转化为十六进制</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num) + <span class="string">': '</span> + num); <span class="comment">// string: a</span></span><br></pre></td></tr></table></figure><blockquote><p>如果直接使用<code>123.toString()</code>是不可以的，会直接报错。因为系统会首先将这个语句识别为浮点型，数学计算的点<code>.</code>优先级最高，所以识别成浮点数，小数点后是字母是肯定报错的。</p></blockquote>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">123.</span>toString();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// 报错，Uncaught SyntaxError: Invalid or unexpected token</span></span><br></pre></td></tr></table></figure><p>String( )：将括号里的内容转换成字符串</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="built_in">String</span>(<span class="number">123</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num) + <span class="string">': '</span> + num); <span class="comment">// string: 123</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="built_in">String</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num)+<span class="string">': '</span>+num); <span class="comment">// string: true</span></span><br></pre></td></tr></table></figure><p>Boolean( )：转换成布尔值</p><ul><li>undefined / null / NaN / “” / 0 / false  -&gt; false </li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="built_in">Boolean</span>(<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num) + <span class="string">': '</span> + num); <span class="comment">// boolean: false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="built_in">Boolean</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num) + <span class="string">': '</span> + num); <span class="comment">// boolean: false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="built_in">Boolean</span>(<span class="string">'0'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num) + <span class="string">': '</span> + num); <span class="comment">// boolean: true</span></span><br></pre></td></tr></table></figure><h3 id="隐式"><a href="#隐式" class="headerlink" title="隐式"></a>隐式</h3><p>内部原理：调用显示类型转换。原理：调用 Number( ) 方法转为数字，然后和 NaN 比对。</p><p><code>isNaN()</code> ：判断参数是不是 NaN，返回结果为 boolean 类型。</p><ul><li>常用转换：NaN / undefined / 字符串（除了字符串类型的数字） -&gt; NaN</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">isNaN</span>(<span class="literal">NaN</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">isNaN</span>(<span class="number">123</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">isNaN</span>(<span class="string">'123'</span>)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">isNaN</span>(<span class="string">'aa'</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">isNaN</span>(<span class="literal">undefined</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">isNaN</span>(<span class="literal">null</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p><code>++/--</code>、<code>+/-</code>（一元正负）：转换为 number 类型。</p><ul><li>原理：调用 Number( )。</li><li>一元正负，只有一边有参数，如”+ a” / “- b”</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'abc'</span>;</span><br><span class="line">a++;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(a), a);<span class="comment">// number NaN</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="string">'123'</span>;</span><br><span class="line">b++;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(b), b);<span class="comment">// number 124</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = <span class="literal">null</span>;</span><br><span class="line">c--;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(c), c);<span class="comment">// number -1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d = +<span class="string">'abc'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(d), d);<span class="comment">//number NaN</span></span><br></pre></td></tr></table></figure><p><code>+</code> (加号)：</p><ul><li>若加号两边存在一个字符串，将另一个也转为字符串，转为 string 类型。调用 String 方法。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span> +<span class="string">'abc'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(a), a);<span class="comment">// string 1abc</span></span><br></pre></td></tr></table></figure><ul><li>其他情况下（number / undefined / null / boolean），转为 number 类型。调用 Number 方法。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="literal">false</span> + <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(a), a);<span class="comment">// number 1</span></span><br></pre></td></tr></table></figure><p><code>-、*、/、%</code>：转为 number 类型。原理：调用 Number 方法</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'1'</span> * <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(a), a);<span class="comment">// number 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">null</span> / <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(b), b);<span class="comment">// number 0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> c = <span class="string">'abc'</span> - <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(c), c);<span class="comment">// number NaN</span></span><br></pre></td></tr></table></figure><p><code>&amp;&amp;、||</code>：过程中转为 boolean 类型进行比较，结果返回表达式的值（值本身是什么类型就返回什么类型）。</p><p><code>!</code>：结果返回 boolean 类型。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="string">'abc'</span> &amp;&amp; <span class="number">2</span>; </span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num), num);<span class="comment">// number 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="string">'abc'</span> &amp;&amp; <span class="string">'def'</span>; </span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num), num);<span class="comment">// string def</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="literal">null</span> &amp;&amp; <span class="number">4</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num), num);<span class="comment">// object null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = !!<span class="string">'a'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(num), num);<span class="comment">// boolean true</span></span><br></pre></td></tr></table></figure><p><code>&lt;、&gt;、&lt;=、&gt;=</code> ：</p><ul><li>两边都是字符串时，比较 asc 码，返回 boolean 类型。</li><li>其他情况下，调用 Number( )，先转换为数字进行比较，结果返回 boolean 类型。</li><li>undefined 和 null 除外，见特殊情况。</li></ul><p><code>==、!=</code> ：若两边均为对象，对比它们的引用是否相同，返回 boolean 类型。其他情况下，调用 Number 方法，两边转为数字进行比较，结果返回 boolean 类型。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引用值，两个不同的地址引用（不同房间）：</span></span><br><span class="line"><span class="built_in">console</span>.log(&#123;&#125; == &#123;&#125;); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 同一个地址引用：</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> obj1 = obj;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj == obj1); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>特殊情况：</p><ul><li>undefined 和 null 既不大于 0，也不小于 0，更不等于 0。</li><li><code>undefined == null</code></li><li><code>NaN !== NaN</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span> &gt; <span class="number">0</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span> &lt; <span class="number">0</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span> == <span class="number">0</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">null</span> &gt; <span class="number">0</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">null</span> &lt; <span class="number">0</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">null</span> == <span class="number">0</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span> == <span class="literal">null</span>);<span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> == <span class="literal">NaN</span>);<span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>例：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// false == 0, true == 1, 0 &gt; 1 -&gt; false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">false</span> &gt; <span class="literal">true</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 先判断 1 &gt; 10 -&gt; false, false == 0, 0 &gt; 0 -&gt; false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span> &gt; <span class="number">10</span> &gt; <span class="number">0</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 &gt; 3 -&gt; false, false == 0, 0 &lt; 1 -&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span> &gt; <span class="number">3</span> &lt; <span class="number">1</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>不发生类型转换：</p><ul><li><code>===</code></li><li><code>!==</code></li></ul><h3 id="常用转换汇总"><a href="#常用转换汇总" class="headerlink" title="常用转换汇总"></a>常用转换汇总</h3><p>Boolean()：undefined、null、NaN、””、0、false  -&gt; false</p><p>Number()：（千方百计变成数字）</p><ul><li>undefined / 字符串（除了字符串类型的数字）/ NaN -&gt; NaN</li><li>true -&gt; 1</li><li>false / “” / null -&gt; 0</li><li>“123” -&gt; 123 （字符串类型的数字直接转换类型，数值不变）</li></ul><p>parseInt (string, radix)：（只要整数，不管其他）</p><ul><li>“123.7” -&gt; 123</li><li>“123abc” -&gt; 123（首位是数字的话，从数字位开始看，在非数字位截断）</li><li>其他 -&gt; NaN</li></ul><p>例 1：关于 parseInt() 方法</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">parseInt</span>(<span class="string">'123abc'</span>), <span class="built_in">parseInt</span>(<span class="string">'123abc'</span>)); <span class="comment">// number 123</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(<span class="string">'123.7'</span>)); <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">parseInt</span>(<span class="literal">undefined</span>), <span class="built_in">parseInt</span>(<span class="literal">undefined</span>)); <span class="comment">// number NaN</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(<span class="literal">null</span>)); <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(<span class="literal">NaN</span>)); <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(<span class="string">'abc123'</span>)); <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(<span class="string">''</span>)); <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(<span class="literal">true</span>)); <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(<span class="literal">false</span>)); <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure><p>例 2：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="literal">false</span> + <span class="number">1</span>; </span><br><span class="line"><span class="comment">// 0 + 1</span></span><br><span class="line"><span class="built_in">console</span>.log(str); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> demo = <span class="literal">false</span> == <span class="number">1</span>; </span><br><span class="line"><span class="comment">// 0 !== 1 -&gt; false</span></span><br><span class="line"><span class="built_in">console</span>.log(demo); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">11</span> + <span class="string">'11'</span> * <span class="number">2</span> == <span class="number">33</span>);<span class="comment">// true</span></span><br><span class="line"><span class="comment">//          11 + 22</span></span><br></pre></td></tr></table></figure><p>例 3:</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(a) &amp;&amp; -<span class="literal">true</span> + (+<span class="literal">undefined</span>) + <span class="string">''</span>); <span class="comment">// 'NaN'</span></span><br><span class="line"><span class="comment">// 左边：typeof(a) -&gt; 'undefined'</span></span><br><span class="line"><span class="comment">// &amp;&amp; 优先级低于算术运算符，放在最后处理</span></span><br><span class="line"><span class="comment">// 右边：-true + (+undefined) + '' -&gt; -1 + NaN + '' -&gt; NaN + '' -&gt; 'NaN'</span></span><br><span class="line"><span class="comment">// 'undefined' &amp;&amp; 'NaN'</span></span><br><span class="line"><span class="comment">// 一真返二</span></span><br><span class="line"><span class="comment">// 'NaN'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span>(a) &amp;&amp; -<span class="literal">true</span> + (+<span class="literal">undefined</span>) + <span class="string">''</span>)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'是否能输出'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 条件内返回的是字符串的'NaN'，为 true，可以执行</span></span><br></pre></td></tr></table></figure><p>例 4:</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">!!<span class="string">' '</span> + !!<span class="string">''</span> - !!<span class="literal">false</span> || <span class="built_in">console</span>.log(<span class="string">'能吗？'</span>);</span><br><span class="line"><span class="comment">// 左边：true + false - false -&gt; 1 + 0 - 0 = 1</span></span><br><span class="line"><span class="comment">// 1 为真，会直接返回 1，|| 后面的语句不会执行</span></span><br></pre></td></tr></table></figure><h2 id="进制"><a href="#进制" class="headerlink" title="进制"></a>进制</h2><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><p>进制也就是进位计数制，是人为定义的带进位的计数方法。对于任何一种进制—— X 进制，就表示每一位置上的数运算时都是逢 X 进一位。 </p><p>十进制是逢十进一，十六进制是逢十六进一，二进制就是逢二进一，以此类推，X 进制就是逢 X 进位。</p><p>比如十六进制：1, 2, 3, 4, 5, 6, 7, 8, 9, a, b, c, d, e, f。如果 f + 1，那么按照逢十六进一的规则，个位数变为 0，然后向前进一位，十位数变为 1。那么：f + 1 = 10，这里的 10（一零），就代表十进制里的 16。</p><p>比如二进制：0, 1。如果 1 + 1，按照逢二进一的规则，个位数变为 0 ，十位数变为 1，1 + 1 = 10，这里的 10（一零），代表十进制里的 2。</p><h3 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h3><blockquote><p>十进制 -&gt; X 进制：除。数除以 X，得商，接着用商除 X，直到商为 0，余数倒过来写。<br>X 进制 -&gt; 十进制：乘。从数的个位开始，依次乘以 X 的 0 次方，1 次方……，最后加起来。</p></blockquote><p>十进制 -&gt; 十六进制</p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">10 进制数：33</span><br><span class="line"></span><br><span class="line">33 / 16 = 2 ...... 1</span><br><span class="line"> 2 / 16 = 0 ...... 2</span><br><span class="line"></span><br><span class="line">转换成 16 进制数：21</span><br></pre></td></tr></table></figure><p>十六进制 -&gt; 十进制</p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">16 进制数：21</span><br><span class="line"></span><br><span class="line">1 * 16⁰ + 2 * 16¹ = 33</span><br><span class="line"></span><br><span class="line">转换成 10 进制数：33</span><br></pre></td></tr></table></figure><p>十进制 -&gt; 八进制</p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">10 进制数：19</span><br><span class="line"></span><br><span class="line">19 / 8 = 2 ...... 3</span><br><span class="line"> 2 / 8 = 0 ...... 2</span><br><span class="line"></span><br><span class="line">转换成 8 进制数：23</span><br></pre></td></tr></table></figure><p>八进制 -&gt; 十进制<br>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">8 进制数：23</span><br><span class="line"></span><br><span class="line">3 * 8⁰ + 2 * 8¹ = 19</span><br><span class="line"></span><br><span class="line">转换成 10 进制数：19</span><br></pre></td></tr></table></figure></p><p>十进制 -&gt; 二进制<br>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">10 进制数：46</span><br><span class="line"></span><br><span class="line">46 / 2 = 23 ...... 0</span><br><span class="line">23 / 2 = 11 ...... 1</span><br><span class="line">11 / 2 =  5 ...... 1</span><br><span class="line">5  / 2 =  2 ...... 1</span><br><span class="line">2  / 2 =  1 ...... 0</span><br><span class="line">1  / 2 =  0 ...... 1</span><br><span class="line"></span><br><span class="line">转换成 2 进制数：101110</span><br></pre></td></tr></table></figure></p><p>二进制 -&gt; 十进制<br>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2 进制数：101110</span><br><span class="line"></span><br><span class="line">0 * 2⁰ + 1 * 2¹ + 1 * 2² + 1 * 2³ + 0 * 2⁴ + 1 * 2⁵ = 46</span><br><span class="line"></span><br><span class="line">转换成 10 进制数：46</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      数据类型的分类、判断与转换
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://cnlmx.top/categories/JavaScript/"/>
    
      <category term="学习笔记" scheme="https://cnlmx.top/categories/JavaScript/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="JavaScript" scheme="https://cnlmx.top/tags/JavaScript/"/>
    
      <category term="前端" scheme="https://cnlmx.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript笔记(一)基础知识</title>
    <link href="https://cnlmx.top/post/d459/"/>
    <id>https://cnlmx.top/post/d459/</id>
    <published>2019-07-03T13:17:25.000Z</published>
    <updated>2020-05-18T03:01:33.551Z</updated>
    
    <content type="html"><![CDATA[<h2 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h2><p>Mosaic 是互联网历史上第一个获普遍使用和能够显示图片的网页浏览器。于 1993 年问世。</p><p>浏览器组成：</p><ol><li>shell （外形）部分</li><li>内核部分：渲染引擎（语法规则和渲染），js 引擎，其他模块</li></ol><p>主流浏览器及其内核：</p><ol><li>IE          -&gt;       Trident</li><li>Chrome      -&gt;      Blink</li><li>Opera       -&gt;      Blink</li><li>Safari      -&gt;      Webkit</li><li>Firefox     -&gt;      Gecko</li></ol><p>2001 年的 IE6 浏览器，首次实现对 JavaScript 引擎的优化和分离。</p><p>2008 年 Google 发布最新浏览器 Chrome，它是采用优化后的 JavaScript 引擎，引擎代号 V8，因能把 JavaScript 代码直接转化为机械码来执行，进而以速度快而闻名。</p><h2 id="了解-JavaScript"><a href="#了解-JavaScript" class="headerlink" title="了解 JavaScript"></a>了解 JavaScript</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p>编译型：C、C++ 等语言需要一个编译器（compiler）。编译器是一种程序，能够把用 Java 等高级语言编写出来的源代码翻译为直接在计算机上执行的文件。</p><p>解释型：不需要编译器，它们只需要解释器。对于 JavaScript，浏览器负责完成有关的解释和执行工作。</p><h3 id="编程形式"><a href="#编程形式" class="headerlink" title="编程形式"></a>编程形式</h3><ol><li><p>面向过程：C</p></li><li><p>面向对象：Java、C++</p></li><li><p>既面向对象也面向过程：JavaScript </p></li></ol><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ol><li><p>解释型语言 — （不需要编译成文件）跨平台。</p></li><li><p>单线程 — 同一时间只能干一件事。</p></li><li><p>弱类型语言 — 存放的数据类型可变。</p></li></ol><h3 id="组成部分"><a href="#组成部分" class="headerlink" title="组成部分"></a>组成部分</h3><p>我们把 JavaScript 中的核心部分称为 ECMAScript，加上 BOM（浏览器对象模型）与 DOM（文档对象类型），三者共同组成了 JavaScript。</p><ol><li>ECMA-262 标准规定了这门语言的如下组成部分：语法、类型、语句、关键字、保留字、操作符、对象。</li><li>浏览器对象模型（BOM，Browser Object Model），提供与浏览器交互的方法和接口。</li><li>文档对象内容（DOM，Document Object Model），提供访问和操作网页内容的方法和接口。</li></ol><h3 id="执行队列"><a href="#执行队列" class="headerlink" title="执行队列"></a>执行队列</h3><p>执行队列（过程）：轮转时间片。</p><ol><li>单线程模拟多线程。</li><li>类似吃饭，吃一口米饭，吃一口茄子，再吃一口排骨，再吃一口米饭，再吃一口米饭，再吃一口茄子，顺序完全随机，在足够快的时间内，肉眼可见菜和饭在同时减少。</li><li>比如 js 引擎要执行任务 1 和任务 2，js 引擎会把任务 1 和任务 2 切成无数个片段，然后把这些片段随机排成一个队列送入引擎执行，直到被执行完。</li></ol><blockquote><p>异步（asynchronous）：同时执行，类似于有很多条路一起走，可以同时出发。<br>同步（synchronous）：分次执行，类似于只有一条路走，这个走完了下个才能走。</p></blockquote><h3 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h3><p>引入方法：</p><ol><li><p>页面内嵌<code>&lt;script&gt;&lt;/script&gt;</code>标签</p></li><li><p>外部引入<code>&lt;script src=location&gt;&lt;/script&gt;</code></p></li></ol><p>页面中，可以存在多个<code>&lt;script&gt;</code>标签，执行顺序从上到下。只要不存在 defer 和 async 属性，浏览器都会按照 它们在页面中出现的先后顺序依次进行解析。</p><p>传统的做法是所有<code>&lt;script&gt;</code>标签都放在<code>&lt;head&gt;</code>中，这意味着必须等到全部 js 代码都被下载、解析和执行完成以后，才能开始呈现页面的内容（浏览器在遇到<code>&lt;body&gt;</code>标签时才开始呈现内容）。</p><p>为了避免这个问题，现代 Web 应用程序一般都把全部 js 引用放在<code>&lt;body&gt;</code>中页面内容的后面。这样，在解析包含的 js 代码之前，页面的内容将完全呈现在浏览器中。而用户也会因为浏览器窗口显示空白页面的时间缩短而感到打开页面的速度加快了。</p><p>为符合 Web 标准中结构、样式、行为相分离的原则，通常会采用外部引入。</p><blockquote><p>如果有外部 js 文件，那么这个 script 标签里如果再写 js 代码，也是不会执行的，会被直接忽略。<br>基于这个特性，在开发时偶尔会用来存储一些代码。<br>在下面再写一个 script 标签，然后里面写代码是可以的。</p></blockquote><h2 id="计算"><a href="#计算" class="headerlink" title="计算"></a>计算</h2><p>JavaScript 可正常计算的范围：小数点前 16 位，后 16 位。</p><p>js 计算精度不准，是纯粹的 bug，所以在 js 中应尽量避免小数操作。<br>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">0.14</span> * <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// 14.000000000000002</span></span><br></pre></td></tr></table></figure></p><p>如果需要计算，那么采用<code>Math.floor()</code>（向下取整）或<code>Math.ceil()</code>（向上取整）方法。<br>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 向上取整，无论小数是多少，都向前进 1</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="built_in">Math</span>.ceil(<span class="number">123.234</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// 124</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 向下取整，无论小数是多少，都不要了</span></span><br><span class="line"><span class="keyword">var</span> num1 = <span class="built_in">Math</span>.floor(<span class="number">123.999</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num1); <span class="comment">// 123</span></span><br></pre></td></tr></table></figure></p><p><code>Math.random()</code>方法可以随机产生一个 0 ～ 1 之间的开区间的数。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="built_in">Math</span>.random();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// 0.4322440432127299</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// 0.5216225452503296</span></span><br></pre></td></tr></table></figure><p><code>toFixed()</code>方法可以把 Number 四舍五入为指定小数位数的数字。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">123.45678</span>;</span><br><span class="line">   </span><br><span class="line">demo = num.toFixed(<span class="number">2</span>);</span><br><span class="line">   </span><br><span class="line"><span class="built_in">console</span>.log(demo); <span class="comment">// 123.46</span></span><br></pre></td></tr></table></figure><h2 id="变量（variable）"><a href="#变量（variable）" class="headerlink" title="变量（variable）"></a>变量（variable）</h2><p>变量声明</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明、赋值分解</span></span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 单一 var</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="number">2</span>,</span><br><span class="line">    b = <span class="number">4</span>;</span><br></pre></td></tr></table></figure><p>开发规范：单一 var 模式，每个变量用逗号隔开，同时换行。</p><p>命名规则：</p><ol><li>变量名必须以<code>英文字母</code>、<code>_</code>、<code>$</code>开头</li><li>变量名可以包括<code>英文字母</code>、<code>_</code>、<code>$</code>、<code>数字</code></li><li>不可以用系统的关键字、保留字作为变量名。</li></ol><h2 id="语句基本规则"><a href="#语句基本规则" class="headerlink" title="语句基本规则"></a>语句基本规则</h2><p>语句后面要用分号<code>;</code>结束。注意，下列三种语句不用加分号：</p><ol><li>函数： function test() {}</li><li>for 循环：for() {}</li><li>if 语句：if() {}</li></ol><p>一个 HTML 文件中可以放多个 JS 代码块，代码块内的规则可以互通。如果某个代码块内出现 JS 语法错误，会引发该代码块内的后续代码终止，但不会影响其他 JS 代码块，目前有两种错误：</p><ol><li>低级错误：语法解析错误，整个代码块都不会执行。<br>如：使用了中文标点符号：Uncaught Syntax Error: ……</li><li>逻辑错误：标准错误，会执行到该代码块最后一行正确代码再终止。<br>如：没有声明变量，直接使用：Uncaught Reference Error: ……</li></ol><p>书写格式要规范，<code>=</code> <code>+</code> <code>/</code> <code>-</code>两边都应该有空格。</p><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><p><code>+</code>:</p><ul><li>数学运算。</li><li>字符串连接：任何数据类型加字符串都等于字符串。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从左至右运算</span></span><br><span class="line"><span class="comment">// 1+1 数字运算，得 2</span></span><br><span class="line"><span class="comment">// 2+'a' 字符串连接，得 2a</span></span><br><span class="line"><span class="comment">// '2a'+1 字符串连接，得 2a1</span></span><br><span class="line"><span class="comment">// 同理可得 2a11</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="number">1</span> + <span class="number">1</span> + <span class="string">'a'</span> + <span class="number">1</span> + <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// 2a11</span></span><br></pre></td></tr></table></figure><p><code>-、*、/、%、=、()</code></p><p><code>+=、-=、/=、*=、%=</code></p><p><code>++</code>。先加加（减减）还是后加加（减减）是针对当前语句来说的。<code>++</code>放后面，意为先执行该条语句，然后再加加。<code>++</code>放前面，意为先加加，然后再执行该条语句。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a++); <span class="comment">// 10</span></span><br><span class="line"><span class="comment">// 意为先执行 console.log(a)，执行完后 a++</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//此时再看 a 的值，就是加完之后的了</span></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 11</span></span><br></pre></td></tr></table></figure>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> b = ++a - <span class="number">1</span> + a++; </span><br><span class="line"></span><br><span class="line"><span class="comment">// ++a 先加后执行，10 + 1 = 11，a 的值变为 11</span></span><br><span class="line"><span class="comment">// a++ 先执行后加，a 现在的值为 11 ，故 a++ = 11</span></span><br><span class="line"><span class="comment">// b = 11 - 1 + 11 = 21</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(b);<span class="comment">// 21</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// a 两次自增，故值为 12</span></span><br><span class="line"><span class="built_in">console</span>.log(a);<span class="comment">// 12</span></span><br></pre></td></tr></table></figure><p><code>--</code>。注意：有前自增（自减）操作符时，要先加加（减减），再执行该条语句。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> b = a-- + --a; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 先算 --a，先减后执行，a = 1，自减后 a = 0</span></span><br><span class="line"><span class="comment">// 再算 a--，先执行后减，a = 0，故 a-- = 0</span></span><br><span class="line"><span class="comment">// b = 0 + 0 = 0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(b);<span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// a 两次自减，故值为 -1</span></span><br><span class="line"><span class="built_in">console</span>.log(a);<span class="comment">// -1</span></span><br></pre></td></tr></table></figure><h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><p><code>&gt;</code>、<code>&lt;</code>、<code>==</code>、<code>&gt;=</code>、<code>&lt;=</code>、<code>!=</code></p><p>比较结果为 boolean 值：true / false。</p><blockquote><p><code>==</code>是等于，而<code>=</code>是赋值。</p></blockquote><p>字符串的比较规则为 asc 码。如“A”的 asc 码为 65 ，“a”的 asc 码为 97。</p><p>字符串比较是按照顺序来的，如果运算符左边的字符串中顺位第一的字符小于右边字符串的第一位字符，那么左边直接就是小于右边；如果第一位相等，那就再看第二位。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读作字符串一零 &gt; 字符串二</span></span><br><span class="line"><span class="keyword">var</span> result = <span class="string">'10'</span> &gt; <span class="string">'2'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串‘1’的 asc 码为 49</span></span><br><span class="line"><span class="comment">// 字符串‘2’的 asc 码为 50</span></span><br><span class="line"><span class="comment">// 字符串‘3’的 asc 码为 51</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = <span class="string">'3'</span> &gt; <span class="string">'20'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p><code>&amp;&amp;</code>、<code>||</code>、<code>!</code></p><p>运算结果为真实的值</p><p>下面六个值转化为布尔值都是 false：<code>undefined、null、NaN、&quot;&quot;、0、flase</code>。</p><blockquote><p>NaN(Not a Number)：非数，是数字类型的一类值，意为不可表示的值。</p></blockquote><p><code>&amp;&amp;</code>在运行时，在碰到表达式的布尔值为假时，返回该表达式的值。</p><ul><li>多个表达式时，先看第一个表达式转换成布尔值的结果，若结果为真，接着看第二个表达式的布尔值，若第二个也为真，接着看第三个，依此类推，直到表达式的布尔值为 false，直接返回该表达式的值。即看到假，返回假。如果全为真，则返回最后一个表达式的值。</li><li>只有两个表达式时，若第一个表达式的布尔值为 true，返回第二个表达式的值。若第一个表达式为 false，直接返回第一个表达式原本的值。即一真返二。一假返一。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span> &amp;&amp; <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 1 转化为 true，判断为真</span></span><br><span class="line"><span class="comment">// 第一个为 true，直接返回第二个表达式的值</span></span><br></pre></td></tr></table></figure><p>基于<code>&amp;&amp;</code>运算符的原理， 使它具备中断的作用，在实际开发中作为<strong>短路语句</strong>使用，它是 if 语句的简写形式，可以用来替代 if 语句：“如果…是真/假，那么…”</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> &amp;&amp; <span class="built_in">document</span>.write(<span class="string">'a'</span>); <span class="comment">// 不会输出 a</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果前面的数据正确，那么执行后面的语句</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span> &gt; <span class="number">1</span> &amp;&amp; <span class="built_in">console</span>.log(<span class="string">'团子很可爱'</span>); <span class="comment">// 团子很可爱</span></span><br></pre></td></tr></table></figure><p><code>||</code>与<code>&amp;&amp;</code>类似，只不过是碰到表达式的布尔值为真时，返回该表达式的值。</p><ul><li>多个表达式时，若第一个为假，则一直往下看，直到找到为真的表达式，然后返回该值。即看到真，返回真。如果全为假，则返回最后一个表达式的值。</li><li>两个表达式时，若第一个为假，直接返回第二个表达式的值。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span> || <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p><code>!</code>将表达式转换成布尔值再取反，然后输出布尔值。 </p><h3 id="其他：逗号运算符"><a href="#其他：逗号运算符" class="headerlink" title="其他：逗号运算符"></a>其他：逗号运算符</h3><p>形式：(表达式1，表达式2，表达式3………….)<br>作用：通常与小括号<code>()</code>一起使用，逗号<code>,</code>用于连接算式<br>运算规则：对每个操作对象求值（从左至右），返回最后一个操作对象的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>,</span><br><span class="line">      b = <span class="number">20</span>,</span><br><span class="line">      result = (a++, a + b);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log (result); <span class="comment">// 31 </span></span><br><span class="line"><span class="built_in">console</span>.log (a); <span class="comment">// 11</span></span><br><span class="line"><span class="built_in">console</span>.log (b); <span class="comment">// 20</span></span><br></pre></td></tr></table></figure><blockquote><p>查询<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" target="_blank" rel="noopener">运算符优先级</a>。</p></blockquote><h2 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h2><h3 id="if-条件语句"><a href="#if-条件语句" class="headerlink" title="if 条件语句"></a>if 条件语句</h3><p><code>if (条件判断) {执行语句}</code></p><p><code>if () {} else if () {}</code></p><p><code>if () {}</code>&lt;—&gt; <code>&amp;&amp;</code>转换</p><h3 id="for-循环语句"><a href="#for-循环语句" class="headerlink" title="for 循环语句"></a>for 循环语句</h3><p>for 循环执行顺序：</p><ul><li>先执行一遍 (1) ：<code>var i = 0</code></li><li>判断 (2) -&gt; 执行语句 (3)：<code>if(i &lt; 10){console.log(&#39;a&#39;);}</code></li><li>执行 (4)：<code>i++ -&gt; i = 1</code></li><li>判断 (2) -&gt; 执行语句 (3)</li><li>执行 (4)：<code>i++ -&gt; i = 2</code></li><li>判断 (2) -&gt; 执行语句 (3)</li><li>执行 (4)：<code>i++ -&gt; i = 3</code><br>…</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//       (1)      (2)   (4)</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'a'</span>);             <span class="comment">// (3)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;                          <span class="comment">// (1)</span></span><br><span class="line"><span class="keyword">for</span> (; i &lt; <span class="number">10</span>; ) &#123;                  <span class="comment">// (2)</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'a'</span>);             <span class="comment">// (3)</span></span><br><span class="line">      i++;                          <span class="comment">// (4)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>无论 for 语句中写的是什么，都会按照这个执行顺序执行。</p></blockquote><p>while</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">    i++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>do while（很少用）</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'a'</span>);</span><br><span class="line">    i++;</span><br><span class="line">&#125; <span class="keyword">while</span> (i &lt; <span class="number">10</span>)</span><br></pre></td></tr></table></figure><h3 id="switch-语句"><a href="#switch-语句" class="headerlink" title="switch 语句"></a>switch 语句</h3><p>格式：</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (条件) &#123;</span><br><span class="line">    <span class="keyword">case</span> 结果<span class="number">1</span>:                        <span class="comment">// 结果与条件进行判断（比对）</span></span><br><span class="line">        执行语句;                       <span class="comment">// 满足即执行该语句</span></span><br><span class="line">        <span class="keyword">break</span>;                        <span class="comment">// 执行后结束</span></span><br><span class="line">    <span class="keyword">case</span> 结果<span class="number">2</span>: </span><br><span class="line">        执行语句;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> 结果<span class="number">3</span>: </span><br><span class="line">        执行语句;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        执行语句;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>switch 的条件和 case 的结果比对，如果是一样的，就执行。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> date = <span class="built_in">window</span>.prompt(<span class="string">'input'</span>);</span><br><span class="line"><span class="keyword">switch</span> (date) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'monday'</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'tuesday'</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'wednesday'</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'thursday'</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'friday'</span>:</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'working'</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'周六'</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'周日'</span>:</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'relaxing'</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当 case 的结果是表达式时，比较的就是表达式的返回值。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">28</span>,</span><br><span class="line">    greeting;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (<span class="literal">true</span>) &#123;                           <span class="comment">// 条件</span></span><br><span class="line">    <span class="keyword">case</span> age &lt; <span class="number">18</span>:                        <span class="comment">// 结果1</span></span><br><span class="line">        greeting = <span class="string">'同学'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> age &gt;= <span class="number">18</span> &amp;&amp; age &lt; <span class="number">40</span>:             <span class="comment">// 结果2</span></span><br><span class="line">        greeting = <span class="string">'先生'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> age &gt;= <span class="number">40</span>:</span><br><span class="line">        greeting = <span class="string">'前辈'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">        greeting = <span class="string">'你好'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(greeting); <span class="comment">// '先生'</span></span><br></pre></td></tr></table></figure><h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><p>break：终止循环。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++)&#123;</span><br><span class="line">    sum += i;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">    <span class="keyword">if</span> (sum &gt; <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="comment">// 这个 break 能执行是因为最外有一层 for 循环，如果只有 if 语句，是肯定报错的</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>break 必须写在循环里面，否则会报错。</p></blockquote><p>continue：终止本次循环，直接进行下一次循环。</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i % <span class="number">7</span> === <span class="number">0</span> || i % <span class="number">10</span> === <span class="number">7</span>) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      浏览器的发展与起源｜声明变量｜使用运算符和语句
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://cnlmx.top/categories/JavaScript/"/>
    
      <category term="学习笔记" scheme="https://cnlmx.top/categories/JavaScript/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="JavaScript" scheme="https://cnlmx.top/tags/JavaScript/"/>
    
      <category term="前端" scheme="https://cnlmx.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://cnlmx.top/post/3eeb/"/>
    <id>https://cnlmx.top/post/3eeb/</id>
    <published>2019-02-26T04:54:59.517Z</published>
    <updated>2020-05-11T10:19:07.246Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to Hexo! </p><a id="more"></a><p>This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to Hexo! &lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
</feed>
